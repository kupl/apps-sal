["import sys\ninput = sys.stdin.readline\n\nt = int(input())\nfor _ in range(t):\n    n, k = list(map(int, input().split()))\n    s = input()\n    l = ['']*k\n    works = True\n    for i in range(n):\n        c = s[i]\n        if c != '?':\n            if l[i%k] == c or l[i%k] == '':\n                l[i%k] = c\n            else:\n                works = False\n                break\n    if works:\n        smol = 0\n        big = k\n        for c in l:\n            if c == '0':\n                big -= 1\n            elif c == '1':\n                smol += 1\n        goal = k//2\n        if smol <= goal <= big:\n            print('YES')\n        else:\n            print('NO')\n    else:\n        print('NO')\n", "import sys\nreadline = sys.stdin.readline\n\nT = int(readline())\nAns = ['NO']*T\nfor qu in range(T):\n    N, K = map(int, readline().split())\n    S = [-1 if s == '?' else int(s) for s in readline().strip()]    \n    L = [-1]*K\n    for i in range(N):\n        j = i%K\n        si = S[i]\n        if L[j] == -1:\n            L[j] = si\n        elif S[i] == -1:\n            continue\n        else:\n            if L[j] != si:\n                break\n    else:\n        one = 0\n        zero = 0\n        minus = 0\n        for l in L:\n            if l == 1:\n                one += 1\n            elif l == 0:\n                zero += 1\n            else:\n                minus += 1\n        \n        if one < zero:\n            one, zero = zero, one\n        \n        if zero + minus >= one:\n            Ans[qu] = 'YES'\n        \n\nprint('\\n'.join(Ans))", "import sys\nimport heapq, functools, collections\nimport math, random\nfrom collections import Counter, defaultdict\n\n# available on Google, not available on Codeforces\n# import numpy as np\n# import scipy\n\n\ndef solve(srr, k):  # fix inputs here\n    console(\"----- solving ------\")\n    console(srr, k)\n\n    ones = 0\n    zeroes = 0\n\n    for i in range(k):\n        sett = set(srr[i::k])\n        if \"1\" in sett and \"0\" in sett:\n            return \"NO\"\n        if \"1\" in sett:\n            ones += 1\n        if \"0\" in sett:\n            zeroes += 1\n\n    if ones > k // 2 or zeroes > k // 2:\n        return \"NO\"\n\n    return \"YES\"\n\n\ndef console(*args):  # the judge will not read these print statement\n    print('\\033[36m', *args, '\\033[0m', file=sys.stderr)\n    return\n\n# fast read all\n# sys.stdin.readlines()\n\nfor case_num in range(int(input())):\n    # read line as a string\n    # strr = input()\n\n    # read line as an integer\n    # k = int(input())\n    \n    # read one line and parse each word as a string\n    # lst = input().split()\n\n    # read one line and parse each word as an integer\n    _, k = list(map(int,input().split()))\n    srr = input()\n\n    # read matrix and parse as integers (after reading read nrows)\n    # lst = list(map(int,input().split()))\n    # nrows = lst[0]  # index containing information, please change\n    # grid = []\n    # for _ in range(nrows):\n    #     grid.append(list(map(int,input().split())))\n\n    res = solve(srr, k)  # please change\n    \n    # Google - case number required\n    # print(\"Case #{}: {}\".format(case_num+1, res))\n\n    # Codeforces - no case number required\n    print(res)\n", "import sys\ninput = sys.stdin.readline\n\nt=int(input())\nfor tests in range(t):\n    n,k=list(map(int,input().split()))\n    S=input().strip()\n\n    A=[-1]*k\n\n    for i in range(n):\n        if S[i]==\"0\":\n            if A[i%k]==1:\n                print(\"NO\")\n                break\n            else:\n                A[i%k]=0\n\n        if S[i]==\"1\":\n            if A[i%k]==0:\n                print(\"NO\")\n                break\n            else:\n                A[i%k]=1\n    else:\n        Z=0\n        O=0\n        for i in range(k):\n            if A[i]==0:\n                Z+=1\n            if A[i]==1:\n                O+=1\n        if Z>k//2 or O>k//2:\n            print(\"NO\")\n        else:\n            print(\"YES\")\n            \n", "mod = 1000000007\neps = 10**-9\n\n\ndef main():\n    import sys\n    input = sys.stdin.readline\n\n    for _ in range(int(input())):\n        N, K = list(map(int, input().split()))\n        S = input().rstrip('\\n')\n\n        N0 = 0\n        N1 = 0\n        ok = 1\n        for k in range(K):\n            flg = -1\n            for j in range(N):\n                i = j*K+k\n                if i >= N:\n                    break\n                if S[i] == \"0\":\n                    if flg == 1:\n                        ok = 0\n                    else:\n                        flg = 0\n                elif S[i] == \"1\":\n                    if flg == 0:\n                        ok = 0\n                    else:\n                        flg = 1\n            if flg == 0:\n                N0 += 1\n            elif flg == 1:\n                N1 += 1\n        if N0*2 <= K and N1*2 <= K and ok == 1:\n            print(\"YES\")\n        else:\n            print(\"NO\")\n\n\ndef __starting_point():\n    main()\n\n__starting_point()", "import sys\ninput = sys.stdin.readline\nfor f in range(int(input())):\n    n,k=list(map(int,input().split()))\n    s=input()\n    poss=True\n    sol=[2]*n\n    ones=0\n    zeros=0\n    for i in range(n):\n        if i<k:\n            if s[i]==\"1\":\n                sol[i]=1\n                ones+=1\n            if s[i]==\"0\":\n                sol[i]=0\n                zeros+=1\n        else:\n            if s[i]==\"1\":\n                sol[i]=1\n                if sol[i-k]==0:\n                    poss=False\n                if sol[i-k]==2:\n                    ones+=1\n            if s[i]==\"0\":\n                sol[i]=0\n                if sol[i-k]==1:\n                    poss=False\n                if sol[i-k]==2:\n                    zeros+=1\n            if s[i]==\"?\":\n                if sol[i-k]==1:\n                    sol[i]=1\n                if sol[i-k]==0:\n                    sol[i]=0\n    if not poss or ones>k//2 or zeros>k//2:\n        print(\"NO\")\n    else:\n        print(\"YES\")\n"]