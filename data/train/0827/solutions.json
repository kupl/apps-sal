["try:\r\n    t=int(input())\r\n    for i in range(t):\r\n        n,k=map(int,input().split())\r\n        s=input()\r\n        l=[-1]*len(s)\r\n        numb=s.count('b')\r\n        x=numb\r\n        for j in range(len(s)):\r\n            if(s[j]=='a'):\r\n                l[j]=numb\r\n            if(s[j]=='b'):\r\n                numb=numb-1\r\n        #print(l)\r\n        count1=0\r\n        for j in range(len(l)):\r\n            if(l[j]>0):\r\n                count1=count1+(k*(2*l[j]+(k-1)*x))//2\r\n            elif(l[j]==0):\r\n                count1=count1+(k*(2*0+(k-1)*x))//2\r\n        print(count1)\r\nexcept:\r\n    pass\r\n", "# cook your dish here\n# cook your dish here\nfor u in range(int(input())):\n    n,k=map(int,input().split())\n    s=input()\n    d=0\n    c=0\n    x=s.count('b')\n    for i in range(n):\n        if(s[i]=='b'):\n            c+=1\n        elif(s[i]=='a'):\n            d+=(k*(k+1)//2)*x-(k*c)\n    print(d)\n", "# cook your dish here\nfor u in range(int(input())):\n    n,k=map(int,input().split())\n    s=input()\n    d=0\n    c=0\n    x=s.count('b')\n    for i in range(n):\n        if(s[i]=='b'):\n            c+=1\n        elif(s[i]=='a'):\n            d+=(k*(k+1)//2)*x-(k*c)\n    print(d)\n", "for _ in range(int(input())):\r\n    n,k=map(int,input().split())\r\n    s=[x for x in input().strip()]\r\n    c1=s.count('a')\r\n    c2=s.count('b')\r\n    ans=0\r\n    m=0\r\n    for x in s:\r\n        if x=='b':\r\n            m+=1\r\n        if x=='a':\r\n            ans+=(((k*(k+1))//2)*c2)-(k*m)\r\n    print(ans)", "# cook your dish here\nfor _ in range(int(input())):\n    n,k=map(int,input().split())\n    st=input()\n    a=st.count('a')\n    b=st.count('b')\n    c=0 \n    ca=0\n    for i in range(n):\n        if st[i]=='a':\n            ca+=1\n        if st[i]=='b':\n            c+=ca\n    \n    print(a*b*(k*(k-1)//2)+c*k)", "\r\ntry:\r\n    for _ in range(int(input())):\r\n        n,k= map(int, input().split())\r\n        string = input()\r\n        cnta=cntb=ab=0\r\n        for i in string:\r\n            if i=='a':\r\n                cnta+=1 \r\n            elif i=='b':\r\n                cntb+=1 \r\n                ab+=cnta             #for each b considers all a \r\n        \r\n        final=ab*k \r\n        final+=k*(k-1)*cnta*cntb//2 \r\n        \r\n        print(final)\r\n        \r\nexcept:\r\n    pass\r\n", "#Coded By Ujjwal Bharti\ntulu = int(input())\nfor _ in range(tulu):\n    n,k = [int(x) for x in input().split()]\n    data = input()\n    counterA =0\n    counterB = 0\n    indexListOfA =[]\n    indexListOfB = []\n    for i in range(n):\n        if(data[i]=='a'):\n            counterA += 1\n            indexListOfA.append(i)\n        if(data[i]=='b'):\n            counterB+= 1\n            indexListOfB.append(i)\n    sumOfOneData = 0\n    for j in indexListOfA:\n        lenB = len(indexListOfB)\n        if(lenB==0):\n            break\n        flag= False\n        while len(indexListOfB)>0 and flag==False:\n            if(j<indexListOfB[0]):\n                sumOfOneData += len(indexListOfB)\n                flag=True\n            else:\n                indexListOfB.pop(0)\n    lulu = (k*(k-1))//2\n    result = lulu*counterB*counterA + k*sumOfOneData\n    print(result)", "#Coded By Ujjwal Bharti\ntulu = int(input())\nfor _ in range(tulu):\n    n,k = [int(x) for x in input().split()]\n    data = input()\n    counterA =0\n    counterB = 0\n    sumOfOneData =0\n    indexListOfB = []\n    for i in range(n):\n        if(data[i]=='a'):\n            counterA += 1\n        if(data[i]=='b'):\n            counterB+= 1\n            sumOfOneData += counterA\n    lulu = (k*(k-1))//2\n    result = (lulu*counterB*counterA) + (k*sumOfOneData)\n    print(result)", "# import sys\r\n# sys.stdin=open('input.txt','r')\r\nfor _ in range(int(input())):\r\n    n,k=map(int,input().split())\r\n    s=input()\r\n    t=0\r\n    a,b=0,0\r\n    for i in range(len(s)-1,-1,-1):\r\n        if s[i]=='b':\r\n            a+=1\r\n        elif s[i]=='a':\r\n            b+=a\r\n    t=(s.count('a'))*(s.count('b'))*k*(k-1)//2\r\n    print(b*k+t)", "T=int(input())\r\nfor _ in range(T):\r\n    N, K = map(int, input().split())\r\n    word=input()\r\n    b_count=0\r\n    a_count=0\r\n    left_count=0\r\n    right_count=0\r\n    b_count=word.count(\"b\")\r\n    curr_b=0\r\n    for x in range(N):\r\n        if word[x] == \"b\":\r\n            curr_b+=1\r\n        elif word[x] == \"a\":\r\n            left_count+=curr_b\r\n            right_count+=(b_count-curr_b)\r\n            # print(x, left_count, right_count)\r\n    res = K*(K+1)\r\n    res = res//2\r\n    res = res*(left_count+right_count)\r\n    res-=K*left_count\r\n    print(res)", "t=int(input())\nfor _1 in range(t):\n\tn, k=map(int, input().split())\n\ts=input().strip()\n\ta, b, ab=0, 0, 0\n\tfor x in range(len(s)):\n\t\tif s[x]=='a':a+=1\n\t\tif s[x]=='b':\n\t\t\tb+=1\n\t\t\tab+=a\n\tprint(ab*k+a*b*((k-1)*k)//2)\n", "t=int(input())\nfor _ in range(t):\n    n,k=map(int,input().split())\n    ans=0\n    total=0\n    b=0\n    s=input()\n    for i in range(n):\n        if s[i]=='a':\n            ans+=1\n        if s[i]=='b':\n            total+=ans\n            b+=1\n    x = b*ans\n    sum = (2*total+(k-1)*x)\n    sum=(sum*k)//2\n    print(sum)\n", "# cook your dish here\nT = int(input())\nwhile T != 0:\n\tT = T-1\n\tN,K = map(int,input().split())\n\tS = input()\n\tS1 = S+S\n\tsub = 'ab'\n\tlookup = [[0]*(2*N+1) for _ in range(3)]\n\tfor i in range(0,(2*N+1)):\n\t\tlookup[0][i] = 1\n\t#print(lookup)\n\tfor i in range(1,(2*N+1)):\n\t\tfor j in range(1,3):\n\t\t\tif S1[i-1] == sub[j-1]:\n\t\t\t\tlookup[j][i] = lookup[j-1][i-1] + lookup[j][i-1]\n\t\t\telse:\n\t\t\t\tlookup[j][i] = lookup[j][i-1]\n\t#print(lookup)\n\tbase = lookup[2][N]\n\t#print('base='+str(base))\n\tinc = lookup[2][2*N] - 2*base\n\t#print('inc='+str(inc))\n\tans = K*base + ((K-1)*(K)*inc)//2\n\tprint(ans)\n\t", "# cook your dish here\nfor i in range(int(input())):\n    n , k = map(int , input().split())\n    s = input()\n    ac = 0\n    bc = 0 \n    t = 0 \n    for i in range (n):\n        if (s[i]=='a'):\n            ac+=1\n        if(s[i]=='b'):\n            bc+=1\n            t+=ac\n    r =k * t\n    r+=k*(k-1)//2*ac*bc\n    print(r)", "def get_ans(n, k, s):\r\n    totalB = s.count('b')\r\n    initialB = totalB * k\r\n\r\n    ans = 0\r\n\r\n    for i in s:\r\n        if i == 'b':\r\n            initialB -= 1\r\n        elif i == 'a':\r\n            APa = initialB\r\n            APd = -totalB\r\n            APn = k\r\n\r\n            ans += APn * (2 * APa + (APn - 1) * APd) // 2\r\n    return ans\r\n\r\nfor _ in range(int(input())):\r\n    n, k = map(int, input().split())\r\n    s = input()\r\n    print(get_ans(n, k, s))\r\n", "t=int(input())\nfor x in range(t):\n    n,k=input().split()\n    n,k=int(n),int(k)\n    str=input()\n    i=0\n    count1=0\n    total=0\n    i=0\n    while(i<n):\n        if(str[i]=='a'):\n            count1=count1+1\n        i=i+1 \n    count2,count3=0,0\n    i=0\n    while(i<n):\n        if(str[i]=='a'):\n            count2=count2+1\n        elif(str[i]=='b'):\n            total=total+(k*count2+k*(k-1)*(count1)//2)\n        i=i+1 \n    print(total)    ", "for i in range(int(input())):\r\n    n,k=map(int,input().split())\r\n    l=[str(i) for i in input()]\r\n    ac=l.count('a')\r\n    bc=l.count('b')\r\n    u=0\r\n    co=ac*bc*k*(k-1)//2\r\n    for i in range(n):\r\n        if(l[i]=='a'):\r\n            u=u+bc\r\n        elif(l[i]=='b'):\r\n            bc=bc-1\r\n    co=co+u*k\r\n    print(co)", "t = int(input())\r\nfor i in range(t):\r\n    n,k = map(int,input().split())\r\n    s = input()\r\n    na = s.count('a')\r\n    nb = s.count('b')\r\n    temp =nb\r\n    #print(na,nb)\r\n    summ = 0\r\n    for i in range(len(s)):\r\n        if(s[i]=='a'):\r\n            summ += nb\r\n        elif(s[i]=='b'):\r\n            nb -=1\r\n        else:\r\n            pass\r\n    #print(summ)\r\n    ans = summ*k + ((k*(k-1))//2)*na*temp\r\n    print(ans)\r\n", "# cook your dish here\ndef binarySearch (arr, l, r, x):\n\n\n    if r >= l:\n\n        mid = l + (r - l)//2\n\n\n        if arr[mid] == x:\n            return mid\n\n\n        elif arr[mid] > x:\n            return binarySearch(arr, l, mid-1, x)\n\n        else:\n            return binarySearch(arr, mid + 1, r, x)\n\n    else:\n        if l<len(arr):\n            return l\n        else:\n            return -1\n\nt = int(input())\n\nfor _ in range(t):\n    n,k = map(int,input().split())\n    s = input()\n    posn = []\n    for i in range(len(s)):\n        if s[i] == 'b':\n            posn.append(i)\n    # print(posn)\n    tot = 0\n    for i in range(n):\n        if posn == []:\n            break\n        else:\n            if s[i] == 'a':\n                z = binarySearch(posn,0,len(posn)-1,i)\n\n                if z!=-1 and posn[z]<len(s):\n\n                    # print(posn[z])\n                    if s[posn[z]] == 'b':\n                        z+=1\n                        tot+=len(posn)-z+1\n    tot*=k\n    k1 = s.count('a')\n    k2 = s.count('b')\n    # k1*=(k-1)\n    tot+=((k1*k2)*(k-1)*k)//2\n    print(tot)\n\n\n\n", "t=int(input())\r\nfor i in range(t):\r\n    a=input()\r\n    n,k=int(a.split()[0]),int(a.split()[1])\r\n    s=input()\r\n    l=list(s)\r\n    ac=l.count('a')\r\n    bc=l.count('b')\r\n    u=0\r\n    co=ac*bc*k*(k-1)//2\r\n    for i in range(n):\r\n        if(l[i]=='a'):\r\n            u=u+bc\r\n        elif(l[i]=='b'):\r\n            bc=bc-1\r\n    co=co+u*k\r\n    print(co)", "from functools import reduce\r\nT=int(input())\r\nfor i in range(T):\r\n    count=0\r\n    a=0\r\n    b=0\r\n    Count=0\r\n    N,K=map(int,input().split())\r\n    S=str(input().lower())\r\n    for j in S:\r\n        if j=='a':\r\n            a+=1\r\n        elif j=='b':\r\n            b+=1\r\n            count+=a\r\n    Count=(K*(K-1)*a*b)//2\r\n    Count=Count+K*count\r\n    print(Count)", "for _ in range(int(input())):\r\n    n,k=map(int,input().split())\r\n    s=input()\r\n    if 'a' not in s:\r\n        print(0)\r\n        continue \r\n    cnta=0 \r\n    cntb=0 \r\n    c=0 \r\n    for i in s:\r\n        if i=='a':\r\n            cnta+=1 \r\n        elif i=='b':\r\n            cntb+=1 \r\n            c+=cnta \r\n    ans=c*k \r\n    ans=ans+k*(k-1)//2*cnta*cntb\r\n    print(ans)"]