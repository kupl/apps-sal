["import sys \ninput = sys.stdin.readline\n\nMOD = 10**9 + 7\nt = int(input())\n\nfor _ in range(t):\n    r, c = list(map(int, input().split()))\n    s = [list(input()) for i in range(r)]\n    cnt_a = 0\n    flag_kado = False\n    flag_hen = False\n    flag_hen2 = False\n    if s[0][0] == \"A\" or s[0][c-1] == \"A\" or s[r-1][0] == \"A\" or s[r-1][c-1] == \"A\":\n        flag_kado = True\n    \n    for i in range(r):\n        tmp = 0\n        for j in range(c):\n            if s[i][j] == \"A\":\n                if i == 0 or j == 0 or i == r-1 or j == c-1:\n                    flag_hen2 = True\n                tmp += 1\n        cnt_a += tmp\n        if tmp == c and (i == 0 or i == r-1):\n            flag_hen = True\n        elif tmp == c:\n            flag_kado = True\n\n    for i in range(c):\n        tmp = 0\n        for j in range(r):\n            if s[j][i] == \"A\":\n                tmp += 1\n        if tmp == r and (i == 0 or i == c-1):\n            flag_hen = True\n        elif tmp == r:\n            flag_kado = True\n  \n\n    if cnt_a == c*r:\n        print(0)\n    elif flag_hen:\n        print(1)\n    elif flag_kado:\n        print(2)\n    elif flag_hen2:\n        print(3)\n    elif cnt_a != 0:\n        print(4)\n    else:\n        print(\"MORTAL\")\n", "import sys\n\nfor _ in range(int(input())):\n    r, c = list(map(int, input().split()))\n    a = [[] for _ in range(r)]\n    row_count = [0]*r\n    a_total = 0\n    for y in range(r):\n        a[y] = [1 if c == 'A' else 0 for c in sys.stdin.readline().rstrip()]\n        row_count[y] = sum(a[y])\n        a_total += row_count[y]\n\n    if a_total == r*c:\n        print(0)\n        continue\n    if a_total == 0:\n        print('MORTAL')\n        continue\n\n    col_count = [0]*c\n    for x in range(c):\n        for y in range(r):\n            col_count[x] += a[y][x]\n\n    if row_count[0] == c or row_count[-1] == c or col_count[0] == r or col_count[-1] == r:\n        print(1)\n        continue\n    if a[0][0] | a[0][-1] | a[-1][0] | a[-1][-1] == 1:\n        print(2)\n        continue\n    if any(rcnt == c for rcnt in row_count) or any(ccnt == r for ccnt in col_count):\n        print(2)\n        continue\n    if row_count[0] or row_count[-1] or col_count[0] or col_count[-1]:\n        print(3)\n        continue\n    print(4)\n", "import sys\n\ninput = sys.stdin.readline\n\nt = int(input())\nfor _ in range(t):\n    h, w = list(map(int, input().split()))\n    grid = []\n    for _ in range(h):\n        line = input().rstrip('\\n')\n        tmp = [line[i] == 'A' for i in range(w)]\n        grid.append(tmp)\n\n    ok = 0\n    all_A = 1\n    for i in range(h):\n        for j in range(w):\n            if grid[i][j]:\n                ok = 1\n            else:\n                all_A = 0\n    if not ok:\n        print('MORTAL')\n        continue\n    if all_A:\n        print(0)\n        continue\n\n    all_True = 1\n    for i in range(w):\n        if not grid[0][i]:\n            all_True = 0\n            break\n    if all_True:\n        print(1)\n        continue\n\n    all_True = 1\n    for i in range(w):\n        if not grid[-1][i]:\n            all_True = 0\n            break\n    if all_True:\n        print(1)\n        continue\n\n    all_True = 1\n    for i in range(h):\n        if not grid[i][0]:\n            all_True = 0\n            break\n    if all_True:\n        print(1)\n        continue\n\n    all_True = 1\n    for i in range(h):\n        if not grid[i][-1]:\n            all_True = 0\n            break\n    if all_True:\n        print(1)\n        continue\n\n    if grid[0][0] | grid[0][-1] | grid[-1][0] | grid[-1][-1]:\n        print(2)\n        continue\n\n    flg = 0\n    for i in range(1, h-1):\n        if sum(grid[i]) == w:\n            flg = 1\n            break\n    for i in range(1, w-1):\n        ok = 1\n        for k in range(h):\n            if not grid[k][i]:\n                ok = 0\n                break\n        if ok:\n            flg = 1\n            break\n    if flg:\n        print(2)\n        continue\n\n    any_True = 0\n    for i in range(w):\n        if grid[0][i]:\n            any_True = 1\n            break\n        if grid[-1][i]:\n            any_True = 1\n            break\n    for i in range(h):\n        if grid[i][0]:\n            any_True = 1\n            break\n        if grid[i][-1]:\n            any_True = 1\n            break\n    if any_True:\n        print(3)\n        continue\n\n    print(4)\n"]