["# cook your dish here\nimport numpy as np\ntests = int(input())\nfor _ in range(tests):\n   n = int(input())\n   weights = [int(j) for j in input().split()]\n   edges = [[0] for _ in range(n-1)]\n   for i in range(n-1):\n      edges[i] = [int(j)-1 for j in input().split()]\n   vertex_set = [[] for _ in range(n)]\n   for i in range(n-1):\n      vertex_set[edges[i][0]].append(edges[i][1])\n      vertex_set[edges[i][1]].append(edges[i][0])\n   counts = [0 for _ in range(3)]\n   for i in range(n):\n      counts[weights[i]] += 1\n   if counts[1] == 0:\n      print(2 * (counts[0] != 0 and counts[2] != 0))\n   elif counts[1] == n:\n      print(0)\n   else:\n      visited = [0]\n      for i in range(n):\n         vertex = visited[i]\n         for v in vertex_set[vertex]:\n            if v not in visited:\n               visited.append(v)\n      vertex_nums = [[0] for _ in range(n)]\n      for i in range(n-1,-1,-1):\n         vertex = visited[i]\n         for v in vertex_set[vertex]:\n            if v in visited[i:]:\n               vertex_nums[vertex].append(sum(vertex_nums[v])+1)\n      for i in range(n):\n         vertex_nums[i].append(n-1-sum(vertex_nums[i]))\n      sums = np.zeros(n,dtype=bool)\n      sums[0] = True\n      for i in range(n):\n         new_sums = np.zeros(n,dtype=bool)\n         new_sums[0] = True\n         for num in vertex_nums[i]:\n            new_sums[num:n] = np.logical_or(new_sums[num:n],new_sums[:n-num])\n         sums = np.logical_or(sums,new_sums)\n      solved = False\n      for i in range(n):\n         if sums[i] and counts[0] <= i and counts[2] <= n - 1 - i:\n            solved = True\n            break\n      if solved or counts[1] > 1:\n         print(1)\n      else:\n         print(2)"]