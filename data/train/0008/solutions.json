["import sys\ninput = sys.stdin.readline\n\ndef main():\n    n, k = map(int, input().split())\n    string = input().strip()\n    if \"W\" not in string:\n        ans = min(n, k) * 2 - 1\n        print(max(ans, 0))\n        return\n        \n    L_s = []\n    cnt = 0\n    bef = string[0]\n    ans = 0\n    for s in string:\n        if s == bef:\n            cnt += 1\n        else:\n            if bef == \"L\":\n                L_s.append(cnt)\n            else:\n                ans += cnt * 2 - 1\n            cnt = 1\n        bef = s\n    if bef == \"W\":\n        ans += cnt * 2 - 1\n        cnt = 0\n        \n    if string[0] == \"L\" and L_s:\n        cnt += L_s[0]\n        L_s = L_s[1:]\n    L_s.sort()\n    for l in L_s:\n        if k >= l:\n            ans += l * 2 + 1\n            k -= l\n        else:\n            ans += k * 2\n            k = 0\n            \n    ans += 2 * min(k, cnt)\n    print(ans)\n    \n    \n    \nfor _ in range(int(input())):\n    main()", "import sys\n\ninput = sys.stdin.readline\n\nfor _ in range(int(input())):\n    n,k = map(int,input().split())\n    s = input()\n    s = [s[i] for i in range(n)]\n\n    base = s.count(\"W\")\n    if base == 0:\n        if k:\n            print(2*k-1)\n        else:\n            print(0)\n    elif base+k>=n:\n        print(2*n-1)\n    else:\n        interval = []\n        while s and s[-1]==\"L\":\n            s.pop()\n        s = s[::-1]\n        while s and s[-1]==\"L\":\n            s.pop()\n\n        while s:\n            if s[-1]==\"W\":\n                while s and s[-1]==\"W\":\n                    s.pop()\n            else:\n                tmp = 0\n                while s and s[-1]==\"L\":\n                    s.pop()\n                    tmp += 1\n                interval.append(tmp)\n        interval.sort(reverse=True)\n        K = k\n        while interval and k:\n            if k>=interval[-1]:\n                k -= interval.pop()\n            else:\n                break\n        print(2*(base+K)-1-len(interval))", "import sys\ninput = sys.stdin.readline\n\n\ndef compress(string):\n    string = string + \"#\"\n    n = len(string)\n    begin, end, cnt = 0, 1, 1\n    ans = []\n    while end < n:\n        if string[begin] == string[end]:\n            end, cnt = end + 1, cnt + 1\n        else:\n            ans.append((string[begin], cnt))\n            begin, end, cnt = end, end + 1, 1\n    return ans\n\n\nt = int(input())\nfor _ in range(t):\n    n, k = map(int, input().split())\n    s = input()[:-1]\n    \n    s = compress(s)\n\n    \n    w_groups = 0\n    w_cnt = 0\n    l_cnt = 0\n    li = []\n    for i, (char, cnt) in enumerate(s):\n        if char == \"W\":\n            w_groups += 1\n            w_cnt += cnt\n        if char == \"L\":\n            l_cnt += cnt\n            if 1 <= i < len(s) - 1:\n                li.append(cnt)\n\n    if w_cnt == 0:\n        print(max(min(k, l_cnt) * 2 - 1, 0))\n        continue\n        \n    ans = w_cnt * 2 - w_groups\n    ans += min(k, l_cnt) * 2\n\n    li.sort()\n    for val in li:\n        if k >= val:\n            ans += 1\n            k -= val\n    print(ans)", "for _ in range(int(input())):\n    n, k = list(map(int, input().split()))\n    s = input()\n    k = min(k, s.count(\"L\"))\n    arr = []\n    cur = 0\n    sc = 0\n    se = False\n    if s[0] == \"W\":\n        sc += 1\n    for e in s:\n        if e == \"L\":\n            cur += 1\n        else:\n            if cur > 0 and se:\n                arr.append(cur)\n            se = True\n            cur = 0\n    for i in range(1, n):\n        if s[i] == \"W\":\n            if s[i-1] == \"W\":\n                sc += 2\n            else:\n                sc += 1 \n    arr.sort() \n    arr.reverse()\n    #print(arr, sc)\n    while len(arr) > 0 and arr[-1] <= k:\n        k -= arr[-1]\n        sc += arr[-1]*2+1\n        arr.pop()\n    #print(k)\n    sc += k*2\n    if k > 0 and s.count(\"W\") == 0:\n        sc -= 1\n    print(sc)\n", "from sys import stdin\n\nt = int(stdin.readline())\nfor i in range(t):\n    n, k = tuple(int(x) for x in stdin.readline().split())\n    line = 'L' * (k+1) + stdin.readline()[:-1] + 'L' * (k+1)\n    score = 0\n    flag = False\n    for char in line:\n        if char == 'W':\n            if flag:\n                score += 2\n            else:\n                score += 1\n                flag = True\n        else:\n            flag = False\n            \n    seq = sorted(len(x) for x in line.split('W'))\n\n    if len(seq) == 1:\n        if k == 0:\n            print(0)\n        else:\n            print(2*k-1)\n        continue\n    for item in seq:\n        if item == 0:\n            continue\n        if k - item >= 0:\n            k -= item\n            score += 2 * (item-1) + 3\n        elif k > 0:\n            score += 2 * k\n            break\n        else:\n            break\n    print(min(score, 2*n-1))\n    \n", "from sys import stdin\n\"\"\"\nn=int(stdin.readline().strip())\nn,m=map(int,stdin.readline().strip().split())\ns=list(map(int,stdin.readline().strip().split()))\ns=stdin.readline().strip()\n\"\"\"\nT=int(stdin.readline().strip())\nfor caso in range(T):\n    n,k=list(map(int,stdin.readline().strip().split()))\n    s=list(stdin.readline().strip())\n    aux=[]\n    last=-1\n    for i in range(n):\n        if i>0 and s[i]=='L' and s[i-1]=='W':\n            last=i\n        if i<n-1 and s[i]=='L' and s[i+1]=='W' and last!=-1:\n            aux.append([i-last,last,i])\n    aux.sort()\n    for i in aux:\n        for j in range(i[1],i[2]+1):\n            if k>0:\n                s[j]='W'\n                k-=1\n    ini=-1\n    fin=n\n    for i in range(n):\n        if s[i]=='W':\n            ini=i-1\n            break\n    for i in range(n-1,-1,-1):\n        if s[i]=='W':\n            fin=i+1\n            break\n    for i in range(ini,-1,-1):\n        if k>0:\n            s[i]='W'\n            k-=1\n    for i in range(fin,n):\n        if k>0:\n            s[i]='W'\n            k-=1\n    ans=0\n    if ini==-1 and fin==n:\n        for i in range(n):\n            if k>0:\n                s[i]='W'\n                k-=1\n    for i in range(n):\n        if s[i]=='W':\n            if i>0 and s[i-1]=='W':\n                ans+=2\n            else:\n                ans+=1\n    print(ans)\n            \n        \n        \n\n", "for _ in range(int(input())):\n    n, k = list(map(int, input().split()))\n    inp = input().lower()\n    k = min(k, inp.count('l'))\n    ans = inp.count('w') + tuple(zip(inp, 'l' + inp)).count('ww') + k * 2\n    if 'w' in inp:\n        inp2 = []\n        cur = -1\n        for c in inp:\n            if cur != -1:\n                if c == 'l':\n                    cur += 1\n                else:\n                    inp2.append(cur)\n            if c == 'w':\n                cur = 0\n        inp2.sort()\n        for inp2i in inp2:\n            if inp2i > k:\n                break\n            k -= inp2i\n            ans += 1\n    else:\n        ans = max(ans - 1, 0)\n    print(ans)\n", "import sys\nreadline = sys.stdin.readline\n\nT = int(readline())\nAns = [None]*T\n\nfor qu in range(T):\n    N, K = list(map(int, readline().split()))\n    S = [1 if s == 'W' else 0 for s in readline().strip()]\n    if all(s == 0 for s in S):\n        Ans[qu] = max(0, 2*K-1)\n        continue\n    \n    ans = 0\n    ctr = 0\n    st = []\n    L = []\n    res = 0\n    hh = False\n    for i in range(N):\n        s = S[i]\n        if s == 1:\n            if i == 0 or S[i-1] == 0:\n                ans += 1\n            else:\n                ans += 2\n            if ctr:\n                st.append(ctr)\n                ctr = 0\n            hh = True\n        else:\n            if hh:    \n                ctr += 1\n            else:\n                res += 1\n    res += ctr\n    st.sort()\n    J = []\n    for s in st:\n        J.extend([2]*(s-1) + [3])\n    J.extend([2]*res)\n    Ans[qu] = ans + sum(J[:min(len(J), K)])\nprint('\\n'.join(map(str, Ans)))\n", "def solve():\n    n, k = list(map(int, input().split()))\n    s = input()\n    ans = 0\n    prev = False\n    c = []\n    cc = 0\n    for i in range(n):\n        if s[i] == 'W':\n            if cc:\n                if cc != i:\n                    c.append(cc)\n                cc = 0\n            if prev:\n                ans += 2\n            else:\n                ans += 1\n            prev = True\n        else:\n            prev = False\n            cc += 1\n    c.sort()\n    for i in range(len(c)):\n        if c[i] <= k:\n            k -= c[i]\n            ans += c[i] * 2 + 1\n    if 'W' in s:\n        ans += k * 2\n    else:\n        ans += max(k * 2 - 1, 0)\n    ans = min(ans, n * 2 - 1)\n    print(ans)\nt = int(input())\nfor _ in range(t):\n    solve()\n"]