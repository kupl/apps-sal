["n=int(input())\r\nl=[]\r\ndp=[]\r\nd={}\r\nfor i in range(n):\r\n\tl.append(int(input()))\r\n\td[i]=[]\r\n\tdp.append([0,0])\r\n\r\nfor i in range(n-1):\r\n\ta,b=list(map(int,input().split()))\r\n\td[a-1].append(b-1)\r\n\td[b-1].append(a-1)\r\n#print(l)\r\n#print(d)\r\n\r\ndef dfs(ch,pa,visited):\r\n\tdp[ch][1]=l[ch]\r\n\t#print(dp[ch],ch+1)\r\n\tfor i in range(len(d[ch])):\r\n\t\tif d[ch][i] not in visited:\r\n\t\t\tvisited.add(d[ch][i])\r\n\t\t\tdfs(d[ch][i],ch,visited)\r\n\t\t\tdp[ch][0]+=max(dp[d[ch][i]][0],dp[d[ch][i]][1])\r\n\t\t\tdp[ch][1]+=dp[d[ch][i]][0]\r\n\t\t\t#print(ch+1,dp[ch])\r\nv=set()\r\nv.add(0)\r\ndfs(0,-1,v)\r\n\r\n#print(dp)\r\nprint(max(dp[0][0],dp[0][1]))\r\n\r\n\t\r\n\r\n\r\n"]