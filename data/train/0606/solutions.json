["# cook your dish here\nT = int(input())\nfor i in range(T):\n    l = list(map(int, input().split()))\n    n, k, m, x = l[0], l[1], l[2], l[3]\n    if k == 1:\n        if n == m:\n            print(\"yes\")\n        else:\n            print(\"no\")\n    elif m % k > 1:\n        print(\"no\")\n    elif k == 2:\n        stack = []\n        var = 0\n        while m != 0:\n            var += m % k\n            stack.append(m % k)\n            m //= k\n        if var > n:\n            print(\"no\")\n        elif var == n:\n            print(\"yes\")\n        else:\n            for p in range(100):\n                for q in range(2, len(stack)):\n                    if stack[q - 1] == 0 and stack[q] >= 1:\n                        stack[q-1] = 2\n                        stack[q] -= 1\n                        var += 1\n                        if var == n:\n                            print(\"yes\")\n            if var < n:\n                print(\"no\")\n    else:\n        temp = 0\n        rog = 1\n        while m != 0:\n            if m % k > 2:\n                rog = 0\n                print(\"no\")\n            temp += m % k\n            m //= k\n        if rog:\n            if temp == n:\n                print(\"yes\")\n            else:\n                print(\"no\")\n\n", "# cook your dish here\nT = int(input())\nfor i in range(T):\n    l = list(map(int, input().split()))\n    n, k, m, x = l[0], l[1], l[2], l[3]\n    if k == 1:\n        if n == m:\n            print(\"yes\")\n        else:\n            print(\"no\")\n    elif m % k > 1:\n        print(\"no\")\n    elif k == 2:\n        stack = []\n        var = 0\n        while m != 0:\n            var += m % k\n            stack.append(m % k)\n            m //= k\n        if var > n:\n            print(\"no\")\n        elif var == n:\n            print(\"yes\")\n        else:\n            for p in range(100):\n                for q in range(2, len(stack)):\n                    if stack[q - 1] == 0 and stack[q] >= 1:\n                        stack[q-1] = 2\n                        stack[q] -= 1\n                        var += 1\n                        if var == n:\n                            print(\"yes\")\n            if var < n:\n                print(\"no\")\n    else:\n        temp = 0\n        rog = 1\n        while m != 0:\n            if m % k > 2:\n                rog = 0\n                print(\"no\")\n            temp += m % k\n            m //= k\n        if rog:\n            if temp == n:\n                print(\"yes\")\n            else:\n                print(\"no\")\n", "T = int(input())\nfor i in range(T):\n    l = list(map(int, input().split()))\n    n, k, m, x = l[0], l[1], l[2], l[3]\n    if k == 1:\n        if n == m:\n            print(\"yes\")\n        else:\n            print(\"no\")\n    elif m % k > 1:\n        print(\"no\")\n    elif k == 2:\n        stack = []\n        var = 0\n        while m != 0:\n            var += m % k\n            stack.append(m % k)\n            m //= k\n        if var > n:\n            print(\"no\")\n        elif var == n:\n            print(\"yes\")\n        else:\n            for p in range(1000):\n                for q in range(2, len(stack)):\n                    if stack[q - 1] == 0 and stack[q] >= 1:\n                        stack[q-1] = 2\n                        stack[q] -= 1\n                        var += 1\n                        if var == n:\n                            print(\"yes\")\n            if var < n:\n                print(\"no\")\n    else:\n        temp = 0\n        rog = 1\n        while m != 0:\n            if m % k > 2:\n                rog = 0\n                print(\"no\")\n            temp += m % k\n            m //= k\n        if rog:\n            if temp == n:\n                print(\"yes\")\n            else:\n                print(\"no\")\n\n", "# cook your dish here\nfrom math import log\ntry:\n    for i in range (int(input())):\n        a = input().split(\" \")\n        n,k,x,m = map(int,a)\n        ans = \"no\"\n        u = 0\n    \n        if k != 2 and k != 1:\n            if x%k == 0:\n                x //= k\n                u = -1\n            elif x%k == 1:\n                n -= 1\n                x //= k\n                u = -1\n    \n            if u == -1:     \n                while x != 0:\n                    if x%k == 0:\n                        x //= k\n                    elif x%k == 1:\n                        x //= k\n                        n -= 1\n                    elif x%k == 2:\n                        x //= k\n                        n -= 2\n                    else:\n                        break\n    \n            if n == 0 and x == 0:\n                ans = \"yes\"\n    \n        elif k == 1:\n            if x == n:\n                ans = \"yes\"\n    \n        else:\n            lst = []\n            p = 0\n            N = n\n            while x != 0:\n                if x%2 == 0:\n                    x //= 2\n                    p += 1\n                elif x%2 == 1:\n                    x //= 2\n                    n -= 1\n                    p += 1\n                    lst.append(2**(p-1))\n    \n            if len(lst) == N:\n                ans = \"yes\"\n                \n            if len(lst) < N:\n                k = 0\n                g = len(lst)\n                if lst[0] > 2:\n                    g += int(log(lst[0])//log(2))-1\n                    k = 1\n                for i in range(1,len(lst)):\n                    if k == 1:\n                        g += int(log(lst[i]//lst[i-1],2))\n                    elif lst[i] > 2*lst[i-1]:\n                        g += int(log(lst[i]//lst[i-1],2))-1\n                        k = 1\n                    else:\n                        k = 0\n                if g >= N:\n                    ans = \"yes\"\n    \n        print(ans)\nexcept EOFError as e : pass\n    ", "from math import log\ntry:\n    for i in range (int(input())):\n        a = input().split(\" \")\n        n,k,x,m = map(int,a)\n        ans = \"no\"\n        u = 0\n    \n        if k != 2 and k != 1:\n            if x%k == 0:\n                x //= k\n                u = -1\n            elif x%k == 1:\n                n -= 1\n                x //= k\n                u = -1\n    \n            if u == -1:     \n                while x != 0:\n                    if x%k == 0:\n                        x //= k\n                    elif x%k == 1:\n                        x //= k\n                        n -= 1\n                    elif x%k == 2:\n                        x //= k\n                        n -= 2\n                    else:\n                        break\n    \n            if n == 0 and x == 0:\n                ans = \"yes\"\n    \n        elif k == 1:\n            if x == n:\n                ans = \"yes\"\n    \n        else:\n            lst = []\n            p = 0\n            N = n\n            while x != 0:\n                if x%2 == 0:\n                    x //= 2\n                    p += 1\n                elif x%2 == 1:\n                    x //= 2\n                    n -= 1\n                    p += 1\n                    lst.append(2**(p-1))\n    \n            if len(lst) == N:\n                ans = \"yes\"\n                \n            if len(lst) < N:\n                k = 0\n                g = len(lst)\n                if lst[0] > 2:\n                    g += int(log(lst[0])//log(2))-1\n                    k = 1\n                for i in range(1,len(lst)):\n                    if k == 1:\n                        g += int(log(lst[i]//lst[i-1],2))\n                    elif lst[i] > 2*lst[i-1]:\n                        g += int(log(lst[i]//lst[i-1],2))-1\n                        k = 1\n                    else:\n                        k = 0\n                if g >= N:\n                    ans = \"yes\"\n    \n        print(ans)\nexcept EOFError as e : pass\n    ", "from math import log\r\nfor i in range (int(input())):\r\n    a = input().split(\" \")\r\n    n,k,x,m = map(int,a)\r\n    ans = \"no\"\r\n    u = 0\r\n\r\n    if k != 2 and k != 1:\r\n        if x%k == 0:\r\n            x //= k\r\n            u = -1\r\n        elif x%k == 1:\r\n            n -= 1\r\n            x //= k\r\n            u = -1\r\n\r\n        if u == -1:     \r\n            while x != 0:\r\n                if x%k == 0:\r\n                    x //= k\r\n                elif x%k == 1:\r\n                    x //= k\r\n                    n -= 1\r\n                elif x%k == 2:\r\n                    x //= k\r\n                    n -= 2\r\n                else:\r\n                    break\r\n\r\n        if n == 0 and x == 0:\r\n            ans = \"yes\"\r\n\r\n    elif k == 1:\r\n        if x == n:\r\n            ans = \"yes\"\r\n\r\n    else:\r\n        lst = []\r\n        p = 0\r\n        N = n\r\n        while x != 0:\r\n            if x%2 == 0:\r\n                x //= 2\r\n                p += 1\r\n            elif x%2 == 1:\r\n                x //= 2\r\n                n -= 1\r\n                p += 1\r\n                lst.append(2**(p-1))\r\n\r\n        if len(lst) == N:\r\n            ans = \"yes\"\r\n            \r\n        if len(lst) < N:\r\n            k = 0\r\n            g = len(lst)\r\n            if lst[0] > 2:\r\n                g += int(log(lst[0])//log(2))-1\r\n                k = 1\r\n            for i in range(1,len(lst)):\r\n                if k == 1:\r\n                    g += int(log(lst[i]//lst[i-1],2))\r\n                elif lst[i] > 2*lst[i-1]:\r\n                    g += int(log(lst[i]//lst[i-1],2))-1\r\n                    k = 1\r\n                else:\r\n                    k = 0\r\n            if g >= N:\r\n                ans = \"yes\"\r\n\r\n    print(ans)\r\n", "T = int(input())\r\nfor i in range(T):\r\n    l = list(map(int, input().split()))\r\n    n, k, m, x = l[0], l[1], l[2], l[3]\r\n    if k == 1:\r\n        if n == m:\r\n            print(\"yes\")\r\n        else:\r\n            print(\"no\")\r\n    elif m % k > 1:\r\n        print(\"no\")\r\n    elif k == 2:\r\n        stack = []\r\n        var = 0\r\n        while m != 0:\r\n            var += m % k\r\n            stack.append(m % k)\r\n            m //= k\r\n        if var > n:\r\n            print(\"no\")\r\n        elif var == n:\r\n            print(\"yes\")\r\n        else:\r\n            for p in range(100):\r\n                for q in range(2, len(stack)):\r\n                    if stack[q - 1] == 0 and stack[q] >= 1:\r\n                        stack[q-1] = 2\r\n                        stack[q] -= 1\r\n                        var += 1\r\n                        if var == n:\r\n                            print(\"yes\")\r\n            if var < n:\r\n                print(\"no\")\r\n    else:\r\n        temp = 0\r\n        rog = 1\r\n        while m != 0:\r\n            if m % k > 2:\r\n                rog = 0\r\n                print(\"no\")\r\n            temp += m % k\r\n            m //= k\r\n        if rog:\r\n            if temp == n:\r\n                print(\"yes\")\r\n            else:\r\n                print(\"no\")\r\n\r\n", "T = int(input())\r\nfor i in range(T):\r\n    l = list(map(int, input().split()))\r\n    n, k, m, x = l[0], l[1], l[2], l[3]\r\n    if k == 1:\r\n        if n == m:\r\n            print(\"yes\")\r\n        else:\r\n            print(\"no\")\r\n    elif m % k > 1:\r\n        print(\"no\")\r\n    elif k == 2:\r\n        stack = []\r\n        var = 0\r\n        while m != 0:\r\n            var += m % k\r\n            stack.append(m % k)\r\n            m //= k\r\n        if var > n:\r\n            print(\"no\")\r\n        elif var == n:\r\n            print(\"yes\")\r\n        else:\r\n            for p in range(1000):\r\n                for q in range(2, len(stack)):\r\n                    if stack[q - 1] == 0 and stack[q] >= 1:\r\n                        stack[q-1] = 2\r\n                        stack[q] -= 1\r\n                        var += 1\r\n                        if var == n:\r\n                            print(\"yes\")\r\n            if var < n:\r\n                print(\"no\")\r\n    else:\r\n        temp = 0\r\n        rog = 1\r\n        while m != 0:\r\n            if m % k > 2:\r\n                rog = 0\r\n                print(\"no\")\r\n            temp += m % k\r\n            m //= k\r\n        if rog:\r\n            if temp == n:\r\n                print(\"yes\")\r\n            else:\r\n                print(\"no\")\r\n\r\n"]