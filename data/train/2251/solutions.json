["import sys\n\nn, m = list(map(int, sys.stdin.readline().strip().split()))\nL = [0 for i in range (0, n)]\nH = [[] for i in range (0, n)]\nfor i in range (0, m):\n    x, y = list(map(int, sys.stdin.readline().strip().split()))\n    x = x - 1\n    y = y - 1\n    if x > y:\n        x, y = y, x\n    L[y] = L[y] + 1\n    H[x].append(y)\nans = 0\nfor i in range (0, n):\n    ans = ans + L[i] * len(H[i])\nprint(ans)\nq = int(sys.stdin.readline().strip())\nfor i in range (0, q):\n    v = int(sys.stdin.readline().strip()) - 1\n    ans = ans - L[v] * len(H[v])\n    L[v] = L[v] + len(H[v])\n    while len(H[v]) > 0:\n        w = H[v].pop()\n        H[w].append(v)\n        L[w] = L[w] - 1\n        ans = ans + L[w] - len(H[w]) + 1\n    print(ans)\n", "import sys\ninput = sys.stdin.readline\n\nn,m=list(map(int,input().split()))\n\nIN=[0]*n\nOUT=[0]*n\n\nINSET=[[] for i in range(n)]\n\nfor i in range(m):\n    x,y=sorted(map(int,input().split()))\n\n    IN[x-1]+=1\n    OUT[y-1]+=1\n    INSET[x-1].append(y-1)\n\nANS=0\nfor i in range(n):\n    ANS+=IN[i]*OUT[i]\n\nprint(ANS)\n\nQ=int(input())\n\nfor i in range(Q):\n    q=int(input())-1\n    ANS-=IN[q]*OUT[q]\n    OUT[q]+=IN[q]\n    IN[q]=0\n\n    for x in INSET[q]:\n        INSET[x].append(q)\n        ANS+=(IN[x]+1)*(OUT[x]-1)-IN[x]*OUT[x]\n        IN[x]+=1\n        OUT[x]-=1\n\n    INSET[q]=[]\n\n    print(ANS)\n", "n, m = map(int, input().split())\nout, inp =[0]*(n+1), [0]*(n+1)\ninset = [[] for i in range(n+1)]\n\nfor i in range(m):\n    x, y = map(int, input().split())\n    \n    if x > y:\n        z = x\n        x = y\n        y = z\n    \n    out[y] += 1\n    inp[x] += 1\n    inset[x].append(y)\n\nq = int(input())\n\nres = 0\nfor ind in range(1, n+1):\n    res += inp[ind] * out[ind]\n\nprint(res)\nfor i in range(q):\n    best = int(input())\n    \n    res -= out[best] * inp[best]\n    for pred_ind in inset[best]:\n        res += -out[pred_ind] * inp[pred_ind] + ((out[pred_ind] - 1) * (inp[pred_ind] + 1))\n        out[pred_ind] -= 1\n        inp[pred_ind] += 1\n        inset[pred_ind].append(best)\n    \n    \n    out[best] += inp[best]\n    inp[best] = 0\n    inset[best] = []\n    \n    print(res)"]