["\ndef main():\n    s = input()\n    l = len(s)\n    \n    pretty_count = 0\n    for i in range(l):\n        left_paren_count = 0\n        right_paren_count = 0\n        wild_count = 0\n        for j in range(i, l):\n            if s[j] == '(':\n                left_paren_count += 1\n            elif s[j] == ')':\n                right_paren_count += 1\n            else: \n                wild_count += 1\n                \n            if left_paren_count + wild_count < right_paren_count:\n                break\n            if left_paren_count < wild_count + right_paren_count:\n                # Should fix one '?' as '('\n                wild_count -= 1\n                left_paren_count += 1\n                if wild_count < 0:\n                    break\n            if left_paren_count == wild_count + right_paren_count:\n                pretty_count += 1\n    print(pretty_count)\n\n\ndef __starting_point():\n    main()\n\n__starting_point()", "s = input()\nres, n = 0, len(s)\nfor i in range(n - 1):\n    j, c, q = i , 0, 0\n    while (j < n):\n        if(s[j] == '('):\n            c += 1\n        elif(s[j] == ')'):\n            c -= 1\n        else:\n            q += 1\n        if(c + q < 0):\n            break\n        if(c < q):\n            c, q = q, c\n        res += (c == q)\n        j += 1\nprint(res)\n", "s=input()\n\na=0\nl=len(s)\nfor i in range(l):\n    k=0\n    m=0\n    for j in range(i,l):\n        m+=s[j]=='('\n        m-=s[j]==')'\n        k+=s[j]=='?'\n        if m+k<0 :\n            break\n        if k>m:\n            m,k=k,m\n        if m==k:\n            a=a+1\nprint(a)            \n", "import sys\nimport math\nfrom collections import defaultdict,deque\ns=sys.stdin.readline()[:-1]\nn=len(s)\ndp=[[False for _ in range(n)] for x in range(n)]\nleft=[n for _ in range(n)]\nans=0\nfor i in range(n-1,-1,-1):\n    right=i\n    for j in range(i+1,n):\n        if j-i+1==2:\n            if (s[i]=='(' or s[i]=='?') and (s[j]==')' or s[j]=='?'):\n                dp[i][j]=True\n                left[j]=min(left[j],i)\n                right=j\n                ans+=1\n                continue\n        if (j-i+1)%2==0:\n            l=left[j]\n            if dp[i][l-1]:\n                dp[i][j]=True\n                left[j]=i\n                right=j\n                ans+=1\n                continue\n            if dp[right+1][j]:\n                dp[i][j]=True\n                left[j]=i\n                right=j\n                ans+=1\n                continue\n            if (s[i]=='(' or s[i]=='?') and (s[j]==')' or s[j]=='?'):\n                if dp[i+1][j-1]:\n                    dp[i][j]=True\n                    left[j]=i\n                    right=j\n                    ans+=1\n                    continue\n#print(dp,'dp')\n'''for i in range(n):\n    print(dp[i])'''\nprint(ans)\n            \n            \n", "st=input()\nle=len(st)\nans=0\nfor i in range(le):\n    l=0\n    w=0\n    for j in range(i,le):\n        if(st[j]==\"(\"):\n            l+=1\n        elif(st[j]==\")\"):\n            l-=1\n        else:\n            w+=1\n        if(l+w<0):\n            break\n        elif(w>l):\n            xx=l\n            l=w\n            w=xx\n        elif(l==w):\n            ans+=1\nprint(ans)", "s = input()\nans = 0\nfor i in range(0, len(s) - 1):\n    addQ = 0\n    subQ = 0\n    cur = 0\n    for j in range(i, len(s)):\n        if s[j] == '(':\n            cur += 1\n        elif s[j] == ')':\n            cur -= 1\n            if cur < 0 and subQ > 0:\n                cur += 2\n                subQ -= 1\n                addQ += 1\n        else:\n            if cur > 0:\n                subQ += 1\n                cur -= 1\n            else:\n                addQ += 1\n                cur += 1\n        if cur < 0:\n            break\n        if cur == 0:\n            ans += 1\nprint(ans)\n"]