["# cook your dish here\nfrom sys import stdin,stdout\na,b=list(map(int,stdin.readline().split()))\nleft=[]\ntop=[]\nfor i in range(a):\n c,d=list(map(int,stdin.readline().split()))\n left.append(c)\n top.append(d)\nleft.sort()\ntop.sort()\nfrom bisect import bisect_right as br\nfrom bisect import bisect_left as bl\nrow=0\ncol=0\ntotal=0\ncons_x=0\ncons_y=0\nfor i in range(len(left)):\n cons_x+=(abs(left[i]))\n cons_y+=(abs(top[i]))\ntotal=cons_x+cons_y\ncc=stdin.readline().rstrip()\nfor i in cc:\n if i==\"R\":\n  kk=br(left,col)\n  cons_x=(cons_x+kk-(a-kk))\n  col+=1\n if i==\"L\":\n  kk=bl(left,col)\n  cons_x=(cons_x+(a-kk)-kk)\n  col-=1\n if i==\"U\":\n  kk=br(top,row)\n  cons_y=(cons_y+kk-(a-kk))\n  row+=1\n if i==\"D\":\n  kk=bl(top,row)\n  cons_y=(cons_y+(a-kk)-kk)\n  row-=1\n stdout.write(str(cons_x+cons_y))\n stdout.write(\"\\n\")\n  \n\n"]