["#!/usr/bin/env python3\nn = int(input())\na = list(map(int,input().split()))\nb = list(map(int,input().split()))\nif n <= 3:\n    print('YES')\nelse:\n    a.remove(0)\n    b.remove(0)\n    i = a.index(1)\n    a = a[i:] + a[:i]\n    i = b.index(1)\n    b = b[i:] + b[:i]\n    print(['NO','YES'][a == b])\n", "n = int(input())\na = list(map(int, input().split()))\nb = list(map(int, input().split()))\na.remove(0)\nb.remove(0)\ni = a.index(b[0])\nif(a[i:] + a[:i] == b):\n    print('YES')\nelse:\n    print('NO')", "readInts=lambda: list(map(int, input().split()))\n\nn=int(input())\na=readInts()\na.remove(0)\nb=readInts()\nb.remove(0)\npos=a.index(b[0])\na=a[pos:]+a[:pos]\nprint('YES' if a==b else 'NO')", "n = int(input())\nstart = [x for x in input().split(' ') if not x == '0']\nend = [x for x in input().split(' ') if not x == '0']\n\nindex1 = start.index('1')\nindex2 = end.index('1')\n\nfor i in range(n - 1):\n    if not start[index1] == end[index2]:\n        print('NO')\n        break\n    index1 = (index1 + 1) % (n - 1)\n    index2 = (index2 + 1) % (n - 1)\nelse:\n    print('YES')", "n = int(input())\na = list(map(int, input().split()))\nb = list(map(int, input().split()))\na.remove(0)\nb.remove(0)\ni = a.index(b[0])\n\nif(a[i:] + a[:i] == b):\n    print('YES')\nelse:\n    print('NO')", "3.5\nn=int(input())\na=input().split()\nb=input().split()\na.remove('0')\nb.remove('0')\nk=a.index(b[0])\na=a[k:]+a[:k]\nif a==b:\n    print('YES')\nelse:\n    print('NO')", "import sys\nn = int(input())\na = []\nb = []\nx = map(int, input().split())\nfor i in x:\n    if i > 0:\n        a.append(i)\nx = map(int, input().split())\nfor i in x:\n    if i > 0:\n        b.append(i)\nn = n - 1\nfor i in range(0, n):\n    if b[i] == a[0]:\n        for j in range(0, n):\n            if a[j] != b[(i + j) % n]:\n                print(\"NO\")\n                return\n        break\nprint(\"YES\")", "n=int(input())\na=input().split()\nb=input().split()\na.remove('0')\nb.remove('0')\nk=a.index(b[0])\na=a[k:]+a[:k]\nif a==b:\n    print('YES')\nelse:\n    print('NO')", "import math, re, sys, string, operator, functools, fractions, collections\nsys.setrecursionlimit(10**7)\nRI=lambda x=' ': list(map(int,input().split(x)))\nRS=lambda x=' ': input().rstrip().split(x)\ndX= [-1, 1, 0, 0,-1, 1,-1, 1]\ndY= [ 0, 0,-1, 1, 1,-1,-1, 1]\nmod=int(1e9+7)\neps=1e-6\npi=math.acos(-1.0)\nMAX=200010\n#################################################\nn=RI()[0]\na=RI()\nb=RI()\na=[i for i in a if i]\nb=[i for i in b if i]\nif len(a)!=len(b) or (len(a)==n and a!=b):\n    print(\"NO\")\n    return\nID=[0]*MAX\nfor i in range(len(a)):\n    ID[a[i]]=(a[i-1],a[(i+1)%len(a)])\nfor i in range(len(b)):\n    if ID[b[i]]!=(b[i-1],b[(i+1)%len(b)]):\n        print(\"NO\")\n        return\nprint(\"YES\")\n\n\n\n\n\n\n", "n = int(input())\na = list(map(int, input().split()))\nb = list(map(int, input().split()))\n\ni = 0\nt = 0 if a[0] != 0 else 1\nfor j in range(n):\n    if a[t] == b[j]:\n        i = j\n        break\nbl = True\nfor j in range(n):\n    if b[i % n] != a[j]:\n        if a[j] == 0:\n            continue\n        elif b[i % n] == 0 and b[(i + 1) % n] == a[j]:\n            i += 2\n            continue\n        bl = False\n        break\n    i += 1\nprint(\"YES\" if bl else \"NO\")\n", "def main():\n    input()\n    aa = input().split()\n    bb = input().split()\n    aa.remove(\"0\")\n    bb.remove(\"0\")\n    a = aa.index(\"1\")\n    b = bb.index(\"1\")\n    print((\"NO\", \"YES\")[aa[a:] + aa[:a] == bb[b:] + bb[:b]])\n\n\ndef __starting_point():\n    main()\n\n__starting_point()", "N = int(input()) #\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0441\u0442\u0440\u043e\u0432\u043e\u0432\nA = list(map(int,input().split()))\nB = list(map(int,input().split()))\nA.remove(0)\nB.remove(0)\nind_b = B.index(A[0])\nR = B[ind_b:] + B[0:ind_b]\nif A == R:\n    print(\"YES\")\nelse:\n    print(\"NO\")\n", "def main():\n\tn = int(input())\n\ta = [int(x) for x in input().split()]\n\tb = [int(x) for x in input().split()]\n\tprint(solver(a, b))\n\t\ndef solver(a, b):\n\ta.remove(0)\n\tb.remove(0)\n\tindex = b.index(a[0])\n\tif b[index:] + b[:index] == a:\n\t\treturn \"YES\"\n\telse:\n\t\treturn \"NO\"\n\n# def isRotation(a, b):\n# \tif len(a) != len(b):\n# \t\treturn False\n# \telse:\n# \t\tb += b\n# \t\tfor i in range(len(a)):\n# \t\t\tif a == b[i: i + len(a)]:\n# \t\t\t\treturn True\n# \t\treturn False\n\n#def rotateLeft(L):\n#\tL = L[1:] + [L[0]]\n#\treturn L\n\n# L1 = [3, 4, 2, 1]\n# L2 = [1, 2, 3, 4]\n# print(isRotation(L1, L2))\nmain()\n# a = [1, 0, 2]\n# b = [2, 0, 1]\n# print(solver(a, b))\n\n# a2 = [1, 0]\n# b2 = [0, 1]\n# print(solver(a2, b2))\n\n# a3 = [1, 2, 3, 0]\n# b3 = [0, 3, 2, 1]\n# print(solver(a3, b3))\n", "no_islands = int(input())\ninitial = input().split()\nfinal = input().split()\ninitial.remove('0')\nfinal.remove('0')\n\nfirst = initial.index(final[0])\nif initial[first:] + initial[:first] == final:\n\tprint('YES')\nelse:\n\tprint('NO')", "n=int(input())\na=input().split()\nb=input().split()\na.remove('0')\nb.remove('0')\nk=a.index(b[0])\na=a[k:]+a[:k]\nif a==b:\n    print('YES')\nelse:\n    print('NO')\n", "input()\nf = lambda: (' ' + input()).replace(' 0', '')\na, b = f(), f()\nprint('YES' if a in b + b else 'NO')", "n = int(input())\ns1 = list(input().strip().split())\ns2 = list(input().strip().split())\ns1.remove('0')\ns2.remove('0')\ns1 = ''.join(s1)\ns2 = ''.join(s2)\ns1 = s1+s1\nif s2 in s1:\n    print(\"YES\")\nelse:\n    print(\"NO\")\n", "n=int(input())\n\na=input().split()\n\nb=input().split()\n\na.remove('0')\n\nb.remove('0')\n\nk=a.index(b[0])\n\na=a[k:]+a[:k]\n\nif a==b:\n\n    print('YES')\n\nelse:\n\n    print('NO')\n\n\n\n\n\n# Made By Mostafa_Khaled\n", "n = int(input())\n\na = [int(x) for x in input().split()]\nb = [int(x) for x in input().split()]\n\nif a[0] != 0:\n    index_b = b.index(a[0])\nelse:\n    index_b = b.index(a[1])\n\nfor index_a in range(0,len(a)):\n    if a[index_a] == 0:\n        continue\n    if b[index_b%len(a)] == 0:\n        index_b += 1\n\n    if a[index_a] != b[index_b%len(a)]:\n        print('NO')\n        return\n    index_b += 1\n\nprint('YES')\n", "#! Python3\n\nn = int(input())\na = list(map(int, input().split()))\nb = list(map(int, input().split()))\n\nl2 = []\nl1 = []\ni = 0\nind = a.index(0)\nwhile(ind != n):\n    l1.append(a[ind])\n    ind = ind+1\nwhile(len(l1) != n):\n    l1.append(a[i])\n    i += 1\n\ni=0\nl3 = []\nind = b.index(0)\nwhile(ind != n):\n    l3.append(b[ind])\n    ind = ind+1\nwhile(len(l3) != n):\n    l3.append(b[i])\n    i += 1\n\ni=0\nind = l3.index(l1[1])\nwhile(ind != n):\n    l2.append(l3[ind])\n    ind = ind+1\nwhile(len(l2) != n-1):\n    if l3[i] != 0:\n        l2.append(l3[i])\n    i += 1\n\nif(l1[1:] == l2):\n    print(\"YES\")\nelse:\n    print(\"NO\")\n", "import sys\nn = int(input())\na = list(map(int, input().split()))\nb = list(map(int, input().split()))\n\nst = set()\nidx = 0\n\ni = 0\nj = 0\nwhile i < n and a[i] == 0: i += 1\nwhile j < n and a[i] != b[j]: j += 1\n\nb = b[j:] + b[:j] \nj = 0\nwhile i < n:\n    if a[i] != 0:\n        while j < n and b[j] == 0: j += 1\n        if b[j] != a[i] or j == n:\n            print('NO')\n            return\n        j += 1\n    i += 1\nprint('YES')\n        \n", "n = int(input())\nl1 = list(map(int, input().split()))\nl2 = list(map(int, input().split()))\n\nfor k in range(n):\n    if l1[k] == 0:\n        l1 = l1[:k] + l1[k + 1:]\n        break\nfor k in range(n):\n    if l2[k] == 0:\n        l2 = l2[:k] + l2[k + 1:]\n        break\n\ni = 0\nj = 0\nans = True\nfor k in range(n - 1):\n    if l1[k] == 1:\n        i = k\n    if l2[k] == 1:\n        j = k\n    \nfor k in range(n - 1):\n    if l1[(i + k) % (n - 1)] != l2[(j + k) % (n - 1)]:\n        ans = False\n        break\n    \nif ans:\n    print(\"YES\")\nelse:\n    print(\"NO\")\n", "def run():\n    n = int(input())\n    a = [int(i) for i in input().split()]\n    b = [int(i) for i in input().split()]\n\n    i = a.index(1) \n    j = b.index(1) \n    ok = True\n    cont = 0\n    while cont < n:\n        if(a[i] != b[j]):\n            ok = False\n            break\n        i = (i + 1)%n\n        j = (j + 1)%n\n        \n        if(a[i] == 0):\n            i = (i + 1)%n\n        if(b[j] == 0):\n            j = (j + 1)%n\n\n        cont +=1\n    \n    print('YES' if ok else 'NO')\n\n\n\ndef __starting_point():\n    run()\n__starting_point()", "n = int(input())\ns1 = input().split()\ns2 = input().split()\n\nst1 = 0\nst2 = 0\nfor i in range(n):\n    if s1[i] == '1':\n        st1 = i\n    if s2[i] == '1':\n        st2 = i\n\ni = (st1 + 1) % n\nj = (st2 + 1) % n\nf = True\nsteps = 0\nwhile steps < n:\n    if s1[i] == '0':\n        i = (i + 1) % n\n    if s2[j] == '0':\n        j = (j + 1) % n\n    if s1[i] != s2[j]:\n        f = False\n        break\n    i = (i + 1) % n\n    j = (j + 1) % n\n    steps += 1\n\nif f:\n    print('YES')\nelse:\n    print('NO')\n"]