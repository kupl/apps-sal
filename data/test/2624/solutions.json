["import sys\nN, Q = map(int, input().split())\nA = list(map(int, input().split()))\nSign = [0]*(3+10**5)\nSX = [tuple(sys.stdin.readline().split()) for _ in range(Q)]\nmini = 3 + 10**5\nSign = [0]*(3+10**5)\nkeep = 1\nfor (s, x) in SX[::-1]:\n    x = int(x)\n    ax = abs(x) + int((s == '>') ^ (x < 0))\n    sin = 1 if s == '<' else -1\n    if mini > ax:\n        t = sin*keep\n        for i in range(mini-1, ax-1, -1):\n            Sign[i] = t\n        mini = ax\n    keep *= (2*(s == '>') - 1) * (2*(0 < x) - 1)\nAns = [None]*N\nfor i, a in enumerate(A):\n    s = Sign[abs(a)]\n    if s == 0:\n        s = (2*(a > 0) - 1)*keep\n    Ans[i] = s*abs(a)\nprint(*Ans)", "import sys\nN, Q = map(int, input().split())\nA = list(map(int, input().split()))\nSign = [0]*(3+10**5)\nSX = [tuple(sys.stdin.readline().split()) for _ in range(Q)]\nmini = 3 + 10**5\nSign = [0]*(3+10**5)\nkeep = 1\nfor (s, x) in SX[::-1]:\n    x = int(x)\n    ax = abs(x) + int((s == '>') ^ (x < 0))\n    sin = 1 if s == '<' else -1\n    if mini > ax:\n        t = sin*keep\n        for i in range(mini-1, ax-1, -1):\n            Sign[i] = t\n        mini = ax\n    keep *= (2*(s == '>') - 1) * (2*(0 < x) - 1)\nAns = [None]*N\nfor i, a in enumerate(A):\n    s = Sign[abs(a)]\n    if s == 0:\n        s = (2*(a > 0) - 1)*keep\n    Ans[i] = s*abs(a)\nprint(*Ans)", "n,q=map(int,input().split())\na=list(map(int,input().split()))\nswaps=[0]*q\nfor i in range(q):\n    b=input().split()\n    b[1]=int(b[1])\n    out=1 if (b[0]==\"<\" and b[1]<=0) or (b[0]==\">\" and b[1]>=0) else 0\n    split=b[1]+0.5 if b[0]==\">\" else b[1]-0.5\n    sign=1 if split>0 else -1\n    split=abs(split)\n    swaps[i]=(split,sign,out)\nsml=10**5+0.5\nzeros=0\nfor i in range(q):\n    sml=min(swaps[i][0],sml)\n    zeros+=1-swaps[i][2]\nzeros%=2\narr=[0]*100001\nbig=100000.5\nflips=1\nfor i in range(q):\n    if swaps[-1-i][0]<big:\n        if swaps[-1-i][2]==1:\n            for j in range(int(swaps[-1-i][0]+0.5),int(big+0.5)):\n                arr[j]=-swaps[-i-1][1]*flips\n        else:\n            for j in range(int(swaps[-1-i][0]+0.5),int(big+0.5)):\n                arr[j]=swaps[-i-1][1]*flips\n        big=swaps[-1-i][0]\n    if swaps[-1-i][2]==0:\n        flips=-flips\ndef func(k):\n    if abs(k)<sml:\n        return k if zeros==0 else -k\n    else:\n        return arr[abs(k)]*abs(k)\nprint(\" \".join([str(func(guy)) for guy in a]))"]