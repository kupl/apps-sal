["import sys\nfrom collections import defaultdict, Counter\n\nP = 10 ** 9 + 7\n\ndef factmod(n):\n    res = 1\n    for i in range(2, n+1):\n        res *= i\n        res %= P\n\n    return res\n\ndef solve():\n    n, m = list(map(int, input().split()))\n    colour = {i:0 for i in range(1, m+1)}\n    colour_map = {}\n    for i, line in enumerate(sys.stdin):\n        A = [int(x) for x in line.split()]\n        count = Counter(A)\n\n        if count[A[0]] == 1:\n            count.pop(A[0])\n        else:\n            count[A[0]] -= 1\n\n        for c in count:\n            p = (colour[c], i, count[c])\n            if p in colour_map:\n                colour[c] = colour_map[p]\n            else:\n                colour[c] = colour_map[p] = len(colour_map) + 1\n\n    count = Counter(list(colour.values()))\n\n    res = 1\n    for c in count:\n        res *= factmod(count[c])\n        res %= P\n\n    return res\n\nprint(solve())\n", "from collections import Counter\nn, m = list(map(int, input().split()))\nx = [[] for i in range(m)]\nfor i in range(n):\n    a = list(map(int, input().split()))\n    k = a[0]\n    for j in a[1:]:\n        x[j - 1].append(i)\n\n\nans = 1\nMOD = 10 ** 9 + 7\nfor e in list(Counter(list(map(str, x))).values()):\n    for i in range(2, e + 1):\n        ans = ans * i % MOD\n\nprint(ans)\n"]