["from sys import *\nf = list(map(int, stdin.read().split()))\n\nn, m = f[0], f[1]\nd = [[] for i in range(100001)]\n\nfor j in range(2, len(f), 3):\n    x, y, w = f[j:j + 3]\n    d[w].append((y, x))\n\ns = [0] * (n + 1)\nfor q in d:\n    for y, k in [(y, s[x]) for y, x in q]: s[y] = max(s[y], k + 1)\nprint(max(s))", "from sys import *\n\na = list(map(int, stdin.read().split()))\n\nn = a[0]\nm = a[1]\ninf = 10**5 + 1\n\ng = [[] for i in range(inf)]\n\nfor i in range(2, len(a), 3):\n\tb, c, w = a[i:i + 3]\n\tg[w].append((c, b))\nn += 1\ns = [0] * n\n\nfor l in g:\n\tfor i, k in [(i, s[j]) for i, j in l]:\n\t\ts[i] = max(s[i], k + 1)\nprint(max(s))\n"]