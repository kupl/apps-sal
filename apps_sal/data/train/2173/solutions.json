["from itertools import starmap\n\n\ndef main():\n    n, q = list(map(int, input().split()))\n\n    a = list(range(n + 1))\n    flipped = False\n    start = 0\n    end = n\n\n    for _ in range(q):\n        cmd, *args = list(map(int, input().split()))\n\n        if cmd == 1:\n            p = args[0]\n            if p > end-start-p:\n                flipped = not flipped\n                p = end-start-p\n            if flipped:\n                a[end-p:end-2*p:-1] = starmap(\n                    lambda a, b: a+n-b,\n                    list(zip(a[end-p:end-2*p:-1], a[end-p:end]))\n                )\n                end -= p\n            else:\n                start += p\n                a[start:start+p] = starmap(\n                    lambda a, b: a-b,\n                    list(zip(a[start:start+p], a[start:start-p:-1]))\n                )\n        else:\n            l, r = args\n            if flipped:\n                l, r = end-start-r, end-start-l\n            print(a[start + r] - a[start + l])\n\n\ndef __starting_point():\n    main()\n\n\n__starting_point()"]