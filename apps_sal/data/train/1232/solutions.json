["# cook your dish here\nclass node:\n\tdef __init__(self,a,b=0,c=0):\n\t\tself.val=a\n\t\tself.a=b\n\t\tself.b=c\n\narr=[]\n\ndef finder(node,val):\n\tif(arr[node].val==0):\n\t\treturn val\n\telse:\n\t\ta=finder(arr[node].a,val)\n\t\tb=finder(arr[node].b,val)\n\t\tif(arr[node].val==1):\n\t\t\treturn a+b-a*b\n\t\telse:\n\t\t\treturn a*b\n\nt=int(input())\nwhile(t>0):\n\tx=input()\n\tn=int(input())\n\tarr.append(node(0))\n\tfor i in range(0,n):\n\t\tvals=input().split()\n\t\tsz=len(vals)\n\t\tfor i in range(0,sz):\n\t\t\tvals[i]=int(vals[i])\n\t\tif(vals[0]==0):\n\t\t\tnext=node(0)\n\t\t\tarr.append(next)\n\t\telse:\n\t\t\tnext=node(vals[0],vals[1],vals[2])\n\t\t\tarr.append(next)\n\tlower=0.0\n\thigher=1.0\n\teps=1e-9\n\twhile((higher-lower)>eps):\n\t\tmid=(higher+lower)/2.0 \n\t\tif(finder(n,mid)>0.5):\n\t\t\thigher=mid\n\t\telse:\n\t\t\tlower=mid\n\tprint(\"%.5f\" %(higher))\n\tarr=[]\n\t# print(higher)\n\tt-=1", "class node:\r\n\tdef __init__(self,a,b=0,c=0):\r\n\t\tself.val=a\r\n\t\tself.a=b\r\n\t\tself.b=c\r\n\r\narr=[]\r\n\r\ndef finder(node,val):\r\n\tif(arr[node].val==0):\r\n\t\treturn val\r\n\telse:\r\n\t\ta=finder(arr[node].a,val)\r\n\t\tb=finder(arr[node].b,val)\r\n\t\tif(arr[node].val==1):\r\n\t\t\treturn a+b-a*b\r\n\t\telse:\r\n\t\t\treturn a*b\r\n\r\nt=int(input())\r\nwhile(t>0):\r\n\tx=input()\r\n\tn=int(input())\r\n\tarr.append(node(0))\r\n\tfor i in range(0,n):\r\n\t\tvals=input().split()\r\n\t\tsz=len(vals)\r\n\t\tfor i in range(0,sz):\r\n\t\t\tvals[i]=int(vals[i])\r\n\t\tif(vals[0]==0):\r\n\t\t\tnext=node(0)\r\n\t\t\tarr.append(next)\r\n\t\telse:\r\n\t\t\tnext=node(vals[0],vals[1],vals[2])\r\n\t\t\tarr.append(next)\r\n\tlower=0.0\r\n\thigher=1.0\r\n\teps=1e-9\r\n\twhile((higher-lower)>eps):\r\n\t\tmid=(higher+lower)/2.0 \r\n\t\tif(finder(n,mid)>0.5):\r\n\t\t\thigher=mid\r\n\t\telse:\r\n\t\t\tlower=mid\r\n\tprint(\"%.5f\" %(higher))\r\n\tarr=[]\r\n\t# print(higher)\r\n\tt-=1"]