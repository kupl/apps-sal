["# cook your dish here\r\n#Moony and ICPC team\r\nT = int(input())\r\n\r\nfor i in range(T):\r\n    N,data = int(input()),list(map(int,input().split()))\r\n    if(N==3):\r\n        print(sum(data))\r\n    else:\r\n        best = data[0]+data[1]+data[2]\r\n        overall = best\r\n        k=len(data)\r\n        for i in range(1,k-2):\r\n            overall=overall - data[i-1] + data[i+2]\r\n            if(overall>best):\r\n                best = overall\r\n        j=max(data[1],data[-2])\r\n        l= data[-1]+data[0]+j\r\n        if(best < l):\r\n            best = l\r\n        print(best)", "def func(n,l):\r\n    if(n<=3):\r\n        return sum(l)\r\n    else:\r\n        s=0\r\n        for i in range(n-2):\r\n            temp = sum(l[i:i+3:])\r\n            if(temp>s):\r\n                s = temp\r\n        temp = l[n-1]+l[0]+l[1]\r\n        if(temp>s):\r\n                s = temp\r\n        temp = l[n-1]+l[n-2]+l[0]\r\n        if(temp>s):\r\n                s = temp\r\n        \r\n        return s\r\nt = int(input())\r\nfor i in range(t):\r\n    n = int(input())\r\n    l = list(map(int,input().split()))\r\n    print(func(n,l))\r\n    \r\n", "for i in range(int(input())):\n\tn = int(input())\n\tarr = list(map(int,input().split()))\n\tarr_sum = []\n\tfor i in range(len(arr)):\n\t\tarr_sum.append(arr[i]+arr[(i+1)%n]+arr[(i+2)%n])\n\tprint(max(arr_sum))\n", "t=int(input())\nfor s in range(0,t):\n    n=int(input())\n    l=list(map(int,input().strip().split()))\n    a=len(l)\n    i=0\n    max=-999999\n    while(i<a):\n        sum=0\n        if(i==(a-1)):\n            sum=l[i]+l[0]+l[1]\n        elif(i==(a-2)):\n            sum=l[i]+l[i+1]+l[0]\n        else:\n            sum=l[i]+l[i+1]+l[i+2]\n        if(sum>max):\n            max=sum\n        i=i+1\n    print(max)", "'''t = int(input())\nfor i in range(t):\n    n = int(input())\n    l = list(map(int, input().strip().split()))\n    if(n==3):\n        print(l[0]+l[1]+l[2])\n    elif(n==4):\n        print(sum(l)-min(l))\n    else:\n        ans=0\n        for i in range(n):\n            k = [0 for i in range(5)]\n            k[0]=l[i]\n            k[1]=l[(i+n+1)%n]\n            k[2] = l[(i+n+2)%n]\n            k[3] = l[i-1]\n            k[4] = l[i-2]\n            k.sort()\n            p = k[2]+k[3]+k[4]\n            if(p>ans):\n                ans=p\n        print(ans)'''\nt = int(input())\nfor i in range(t):\n    n = int(input())\n    l = list(map(int, input().strip().split()))\n    if(n==3):\n        print(sum(l))\n    else:\n        ans=0\n        for j in range(n):\n            p = l[j]+l[(j+n+1)%n]+l[(j+n+2)%n]\n            if(p>ans):\n                ans=p\n        p = l[n-2]+l[n-1]+l[0]\n        if(p>ans):\n            ans=p\n        p = l[1]+l[n-1]+l[0]\n        if(p>ans):\n            ans=p\n        print(ans)\n    \n            \n", "m=int(input())\r\nfor i in range(0,m):\r\n    n=int(input())\r\n    a=list(map(int,input().strip().split()))\r\n    l=len(a)\r\n    j=0\r\n    max=-999999\r\n    while(j<l):\r\n        sum=0\r\n        if(j==(l-1)):\r\n            sum=a[j]+a[0]+a[1]\r\n        elif(j==(l-2)):\r\n            sum=a[j]+a[j+1]+a[0]\r\n        else:\r\n            sum=a[j]+a[j+1]+a[j+2]\r\n        if(sum>max):\r\n            max=sum\r\n        j=j+1\r\n    print(max)", "try:\n    t=int(input())\n    for s in range(0,t):\n        n=int(input())\n        l=list(map(int,input().strip().split()))\n        a=len(l)\n        i=0\n        max=-999999\n        while(i<a):\n            sum=0\n            if(i==(a-1)):\n                sum=l[i]+l[0]+l[1]\n            elif(i==(a-2)):\n                sum=l[i]+l[i+1]+l[0]\n            else:\n                sum=l[i]+l[i+1]+l[i+2]\n            if(sum>max):\n                max=sum\n            i=i+1\n        print(max)\nexcept:\n    pass", "t=int(input())\r\nfor s in range(0,t):\r\n    n=int(input())\r\n    l=list(map(int,input().strip().split()))\r\n    a=len(l)\r\n    i=0\r\n    max=-999999\r\n    while(i<a):\r\n        sum=0\r\n        if(i==(a-1)):\r\n            sum=l[i]+l[0]+l[1]\r\n        elif(i==(a-2)):\r\n            sum=l[i]+l[i+1]+l[0]\r\n        else:\r\n            sum=l[i]+l[i+1]+l[i+2]\r\n        if(sum>max):\r\n            max=sum\r\n        i=i+1\r\n    print(max)", "t=int(input())\r\nfor s in range(0,t):\r\n    n=int(input())\r\n    l=list(map(int,input().strip().split()))\r\n    a=len(l)\r\n    i=0\r\n    max=-999999\r\n    while(i<a):\r\n        sum=0\r\n        if(i==(a-1)):\r\n            sum=l[i]+l[0]+l[1]\r\n        elif(i==(a-2)):\r\n            sum=l[i]+l[i+1]+l[0]\r\n        else:\r\n            sum=l[i]+l[i+1]+l[i+2]\r\n        if(sum>max):\r\n            max=sum\r\n        i=i+1\r\n    print(max)", "# cook your dish here\nfrom sys import stdin,stdout\n\ns=\"\"\nt=int(stdin.readline())\nfor _ in range(t):\n\tn=int(stdin.readline())\n\ta=list(map(int,stdin.readline().split()))\n\tm=0\n\tfor i in range(-1,n-2):\n\t\tx=a[i]+a[i+1]+a[i+2]\n\t\tif m<x:\n\t\t\tm=x\n\tx=a[n-2]+a[n-1]+a[0]\n\tif m<x:\n\t\tm=x\n\ts+=str(m)+\"\\n\"\n\t\nstdout.write(s)", "t=int(input())   \r\nwhile t>0:\r\n    n=int(input())\r\n    li=list(map(int,input().strip().split()))[:n]\r\n    sum = 0; start = 0; end = 3 - 1;  \r\n    for i in range(3) : \r\n        sum += li[i];  \r\n    ans = sum;  \r\n    for i in range(3, n + 3) : \r\n        sum += li[i % n] - li[(i - 3) % n];  \r\n        if (sum > ans) : \r\n            ans = sum;  \r\n            start = (i - 3 + 1) % n;  \r\n            end = i % n;\r\n    print(ans)\r\n    t=t-1\r\n\r\n\r\n\r\n", "# cook your dish here\nimport sys\n\ntt=int(sys.stdin.readline())\n\nfor _ in range(tt):\n    nn=int(sys.stdin.readline())\n    arr=list(map(int,sys.stdin.readline().split()))\n    maxx=arr[0]+arr[1]+arr[2]\n    summ=maxx\n    for i in range(nn-3):\n        summ=summ-arr[i]+arr[i+3]\n        maxx=max(summ,maxx)\n    if(arr[-1]+arr[-2]+arr[0]>maxx):\n        maxx=arr[-1]+arr[-2]+arr[0]\n    print(maxx)", "# cook your dish here\nt=int(input())\nfor s in range(0,t):\n    n=int(input())\n    l=list(map(int,input().strip().split()))\n    a=len(l)\n    i=0\n    max=-999999\n    while(i<a):\n        sum=0\n        if(i==(a-1)):\n            sum=l[i]+l[0]+l[1]\n        elif(i==(a-2)):\n            sum=l[i]+l[i+1]+l[0]\n        else:\n            sum=l[i]+l[i+1]+l[i+2]\n        if(sum>max):\n            max=sum\n        i=i+1\n    print(max)", "# cook your dish here\r\nfor _ in range(int(input())):\r\n    n=int(input())\r\n    x=list(map(int, input().split()))\r\n    x.append(x[0])\r\n    x.append(x[1])\r\n    n+=2\r\n    s=0\r\n    if(n<=3):\r\n        print(sum(x))\r\n        continue\r\n    for i in range(n-3):\r\n        if(sum(x[i:i+3])>s):\r\n            s=sum(x[i:i+3])\r\n    print(s)", "for _ in range(int(input())):\n    n=int(input())\n    x=list(map(int, input().split()))\n    x.append(x[0])\n    x.append(x[1])\n    n+=2\n    s=0\n    if(n<=3):\n        print(sum(x))\n        continue\n    for i in range(n-3):\n        if(sum(x[i:i+3])>s):\n            s=sum(x[i:i+3])\n    print(s)", "try:\n    t=int(input())\n    for s in range(0,t):\n        n=int(input())\n        l=list(map(int,input().strip().split()))\n        a=len(l)\n        i=0\n        max=-999999\n        while(i<a):\n            sum=0\n            if(i==(a-1)):\n                sum=l[i]+l[0]+l[1]\n            elif(i==(a-2)):\n                sum=l[i]+l[i+1]+l[0]\n            else:\n                sum=l[i]+l[i+1]+l[i+2]\n            if(sum>max):\n                max=sum\n            i=i+1\n        print(max)\nexcept:\n    pass\n", "try:\n    t=int(input())\n    for s in range(0,t):\n        n=int(input())\n        l=list(map(int,input().strip().split()))\n        a=len(l)\n        i=0\n        max=-999999\n        while(i<a):\n            sum=0\n            if(i==(a-1)):\n                sum=l[i]+l[0]+l[1]\n            elif(i==(a-2)):\n                sum=l[i]+l[i+1]+l[0]\n            else:\n                sum=l[i]+l[i+1]+l[i+2]\n            if(sum>max):\n                max=sum\n            i=i+1\n        print(max)\nexcept:\n    pass\n", "# cook your dish here\nT = int(input())\n\nfor i in range(T):\n    N,data = int(input()),list(map(int,input().split()))\n    if(N==3):\n        print(sum(data))\n    else:\n        best = data[0]+data[1]+data[2]\n        overall = best\n        for i in range(1,len(data)-2):\n            overall=overall - data[i-1] + data[i+2]\n            if(overall>best):\n                best = overall\n        if(best < data[-1]+data[0]+max(data[1],data[-2])):\n            best = data[-1] + data[0] + max(data[1],data[-2])\n        print(best)", "t=int(input())\r\nfor i in range(t):\r\n\tn=int(input())\r\n\tarr=list(map(int,input().split()))\r\n\tans=[]\r\n\tfor j in range(n):\r\n\t\tm=sum([arr[j%n],arr[(j+1)%n],arr[(j+2)%n]])\r\n\t\tans.append(m)\r\n\tprint(max(ans))\r\n", "# cook your dish here\nimport sys\n\nt=int(sys.stdin.readline())\n\nfor _ in range(t):\n    n=int(sys.stdin.readline())\n    arr=list(map(int,sys.stdin.readline().split()))\n    maxx=arr[0]+arr[1]+arr[2]\n    summ=maxx\n    for i in range(n-3):\n        summ=summ-arr[i]+arr[i+3]\n        maxx=max(summ,maxx)\n    if(arr[-1]+arr[-2]+arr[0]>maxx):\n        maxx=arr[-1]+arr[-2]+arr[0]\n    print(maxx)", "# cook your dish here\nt = int(input())\nfor _ in range(t):\n    n = int(input())\n    max_rating = 0\n    arr = list(map(int,input().split()))\n    for i in range(1,len(arr)):\n        if i < n-1:\n            x = arr[i-1]+arr[i]+arr[i+1]\n        else:\n            x = arr[i-1]+arr[i]+arr[(i+1)%n]\n        max_rating = max(x,max_rating)\n    print(max_rating)", "T=int(input())\r\nfor t in range(T):\r\n    N=int(input())\r\n    X=list(map(int,input().split())) \r\n    mx=0\r\n    for i in range(N):\r\n        if mx<X[i%N]+X[(i+1)%N]+X[(i+2)%N]:\r\n            mx=X[i%N]+X[(i+1)%N]+X[(i+2)%N]\r\n    print(mx) ", "# cook your dish here\nt = int(input())\n\nfor _ in range(t):\n    l = []\n    n = int(input())\n    temp = list(map(int, input().split()))\n    l = temp[n - 2: n]\n    l.extend(temp)\n    l.extend(temp[: 3])\n    tx = sum(l[:3])\n    mx = tx\n    for i in range(3, len(l)):\n        \n        mx = max(mx, tx - l[i - 3] + l[i])\n        tx = tx - l[i - 3] + l[i]\n    \n    print(mx)", "J = int(input())\n\nfor i in range(J):\n    N,data = int(input()),list(map(int,input().split()))\n    if(N==3):\n        print(sum(data))\n    else:\n        best = data[0]+data[1]+data[2]\n        overall = best\n        for i in range(1,len(data)-2):\n            overall=overall - data[i-1] + data[i+2]\n            if(overall>best):\n                best = overall\n        if(best < data[-1]+data[0]+max(data[1],data[-2])):\n            best = data[-1] + data[0] + max(data[1],data[-2])\n        print(best)", "J = int(input())\n\nfor i in range(J):\n    N,data = int(input()),list(map(int,input().split()))\n    if(N==3):\n        print(sum(data))\n    else:\n        best = data[0]+data[1]+data[2]\n        overall = best\n        for i in range(1,len(data)-2):\n            overall=overall - data[i-1] + data[i+2]\n            if(overall>best):\n                best = overall\n        if(best < data[-1]+data[0]+max(data[1],data[-2])):\n            best = data[-1] + data[0] + max(data[1],data[-2])\n        print(best)"]