def rule30(l, n):
    d = {(0, 0, 0): 0, (0, 0, 1): 1, (0, 1, 0): 1,
         (0, 1, 1): 1, (1, 0, 0): 1, (1, 0, 1): 0,
         (1, 1, 0): 0, (1, 1, 1): 0}
    for i in range(0, n):
        l = [0] * 2 + l + [0] * 2
        l = [d[(l[j], l[j + 1], l[j + 2])] for j in range(0, len(l) - 2)]
    return l

