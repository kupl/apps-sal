has_subpattern=lambda s:s in(2*s)[1:-1]
