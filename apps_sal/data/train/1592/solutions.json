["for i in range(int(input())):\n n=int(input())\n chef=0\n ans=[]\n for i in range(0,n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  if c%2==0:\n   for i in range(1,len(l)//2+1):\n    chef=chef+l[i]\n   continue;\n  for i in range(1,len(l)//2):\n   chef=chef+l[i]\n  ans.append(l[len(l)//2])\n ans.sort(reverse=True)\n for i in range(len(ans)):\n  if i%2==0:\n   chef=chef+ans[i]\n print(chef)\n   \n  \n", "for i in range(int(input())):\n n=int(input())\n chef=0\n ans=[]\n for i in range(0,n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  if c%2==0:\n   for i in range(1,len(l)//2+1):\n    chef=chef+l[i]\n   continue;\n  for i in range(1,len(l)//2):\n   chef=chef+l[i]\n  ans.append(l[len(l)//2])\n ans.sort(reverse=True)\n for i in range(len(ans)):\n  if i%2==0:\n   chef=chef+ans[i]\n print(chef)\n   \n  \n", "for i in range(int(input())):\n n=int(input())\n chef=0\n ans=[]\n for i in range(0,n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  if c%2==0:\n   for i in range(1,len(l)//2+1):\n    chef=chef+l[i]\n   continue;\n  for i in range(1,(len(l)//2)+1):\n   chef=chef+l[i]\n  ans.append(l[len(l)//2])\n print(chef)\n   \n  \n", "for i in range(int(input())):\n n=int(input())\n chef=0\n ans=[]\n for i in range(0,n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  if c%2==0:\n   for i in range(1,len(l)//2+1):\n    chef=chef+l[i]\n   continue;\n  for i in range(1,len(l)//2):\n   chef=chef+l[i]\n  ans.append(l[len(l)//2])\n ans.sort(reverse=True)\n for i in range(len(ans)):\n  if i%2==0:\n   chef=chef+ans[i]\n print(chef)\n   \n  \n", "# cook your dish here\n\nT = int(input())\n\nfor _ in range(T):\n n = int(input())\n s = 0\n temp = []\n for _ in range(n):\n  l = list(map(int, input().split()))\n  if l[0]%2 == 0:\n   s += sum(l[1:len(l)//2+1])\n  else:\n   s += sum(l[1:len(l)//2])\n   temp.append(l[len(l)//2])\n temp.sort(reverse= True)\n s += sum(temp[::2])\n  \n print(s)\n", "t=int(input())\nfor i in range(t):\n n=int(input())\n chef=0\n t=[]\n for i in range(n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  if c%2==0:\n   for i in range(1,len(l)//2+1):\n    chef=chef+l[i]\n   continue;\n  for i in range(1,len(l)//2):\n   chef=chef+l[i]\n  t.append(l[len(l)//2])\n t.sort(reverse=True)\n for i in range(len(t)):\n  if i%2==0:\n   chef=chef+t[i]\n print(chef)\n   \n", "# cook your dish here\nimport math\nfor _ in range(int(input())):\n n=int(input())\n x=0\n mi=[]\n for i in range(n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  l1=l[1:]\n  d=math.floor(c/2)\n  s=sum(l1[:d])\n  x=x+s\n  if c%2!=0:\n   mi.append(l1[d])\n mi.sort(reverse=True)\n for i in range(len(mi)):\n  if(i+1)%2!=0:\n   x=x+mi[i]\n  \n print(x)\n", "# cook your dish here\nimport math\nfor _ in range(int(input())):\n n=int(input())\n x=0\n for i in range(n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  l1=l[1:]\n  d=math.ceil(c/2)\n  s=sum(l1[:d])\n  x=x+s\n  l1=[]\n  c=0\n  d=0\n print(x)\n", "# cook your dish here\nimport math\nfor _ in range(int(input())):\n n=int(input())\n x=0\n for i in range(n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  l1=l[1:]\n  d=math.ceil(c/2)\n  for i in range(d):\n   x=x+l1[i]\n  l1=[]\n  c=0\n  d=0\n print(x)\n", "# cook your dish here\nimport math\nfor _ in range(int(input())):\n n=int(input())\n x=0\n for i in range(n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  l1=l[1:]\n  s=len(l1)\n  d=math.ceil(s/2)\n  for i in range(d):\n   x=x+l1[i]\n print(x)\n", "# cook your dish here\nimport math\nfor _ in range(int(input())):\n n=int(input())\n x=0\n for i in range(n):\n  l=list(map(int,input().split()))\n  c=l[0]\n  l=l[1:]\n  s=len(l)\n  d=math.ceil(s/2)\n  for i in range(d):\n   x=x+l[i]\n print(x)\n", "for _ in range(int(input())):\n chef,f = 0,[]\n for j in range(int(input())):\n  k=list(map(int,input().split()))\n  for r in range(1,k[0]//2 +1 ):chef+=k[r]\n  if(k[0]%2==1):f.append(k[k[0]//2 +1])\n f.sort(reverse=True)\n for p in range(0,len(f),2):chef+=f[p]\n print(chef)", "# cook your dish here\ntest=int(input())\ndic={}\nfor _ in range(test):\n dic={}\n n=int(input())\n for i in range(n):\n  a=input().split()\n  l=[int(a[i]) for i in range(1,int(a[0])+1)]\n  dic[i]=l\n c=0\n lg=[]\n for i in dic:\n  c+=len(dic[i])\n chef={i:dic[i][0] for i in range(n)}\n ram={i:dic[i][len(dic[i])-1] for i in range(n)}\n #chef={k: v for k, v in sorted(chef.items(), key=lambda item: item[1])}\n #ram={k: v for k, v in sorted(ram.items(), key=lambda item: item[1])}\n i=0\n ans=0\n while(i<c):\n  if(i%2==0):\n   var=min(chef,key=chef.get)\n   #print(chef[var])\n   ans+=chef[var]\n   if(len(dic[var])==1):\n    chef.pop(var)\n    ram.pop(var)\n    dic[var].pop(0)\n   else:\n    dic[var].pop(0)\n    chef[var]=dic[var][0]\n   #print(\"dic=\",dic)\n  else:\n   var=min(ram,key=ram.get)\n   lg=len(dic[var])-1\n   if(lg==0):\n    chef.pop(var)\n    ram.pop(var)\n   else:\n    dic[var].pop(lg)\n    ram[var]=dic[var][lg-1]\n   #print(\"dic=\",dic)\n\n  i+=1\n print(ans)\n \n  \n  \n", "for _ in range(int(input())):\n chef=0\n f=[]\n for j in range(int(input())):\n  k=list(map(int,input().split()))\n  for r in range(1,k[0]//2 +1 ):\n    chef+=k[r]\n  if(k[0]%2==1):\n   f.append(k[k[0]//2 +1])\n f.sort(reverse=True)\n for p in range(0,len(f),2):\n  chef+=f[p]\n print(chef)\n   \n", "for _ in range(int(input())):\n chef=0\n for j in range(int(input())):\n  k=list(map(int,input().split()))\n  if(k[0]%2==0):\n   for r in range(1,k[0]//2 +1 ):\n    chef+=k[r]\n  else:\n   for r in range(1,k[0]//2 +2 ):\n    chef+=k[r]\n print(chef)\n   \n", "for _ in range(int(input())):\n n=int(input())\n l,l1=[],[]\n l3=[]\n s=0\n for i in range(n):\n  l2=list(map(int,input().split()))\n  n=l2[0]\n  l2=l2[1:]\n  if n%2==0:\n   s+=sum(l2[:len(l2)//2])\n  else:\n   l.append(sum(l2[:len(l2)//2]))\n   l.append(sum(l2[:len(l2)//2+1]))\n   l1.append(l)\n   l=[]\n   l3.append(l1[len(l1)-1][1]-l1[len(l1)-1][0])\n l4=l3.copy()\n for i in range(len(l3)):\n \n  if i<len(l3)//2:\n   t=l3.index(min(l3))\n   s+=min(l1[t])\n   l3[t]=99999\n  else:\n   t=l4.index(max(l4))\n   s+=max(l1[t])\n   l4[t]=0\n print(s)\n  \n \n \n", "for _ in range(int(input())):\n n=int(input())\n l,l1=[],[]\n l3=[]\n s=0\n for i in range(n):\n  l2=list(map(int,input().split()))\n  n=l2[0]\n  l2=l2[1:]\n  if n%2==0:\n   s+=sum(l2[:len(l2)//2])\n  else:\n   l.append(sum(l2[:len(l2)//2]))\n   l.append(sum(l2[:len(l2)//2+1]))\n   l1.append(l)\n   l=[]\n   l3.append(l1[len(l1)-1][1]-l1[len(l1)-1][0])\n for i in range(len(l3)):\n  if i<len(l3)//2:\n   t=l3.index(min(l3))\n   s+=min(l1[t])\n   l1.remove(l1[t])\n  else:\n   t=l3.index(min(l3))\n   s+=max(l1[t])\n   l1.remove(l1[t])\n print(s)\n  \n \n \n", "for _ in range(int(input())):\n n=int(input())\n l,l1=[],[]\n l3=[]\n s=0\n for i in range(n):\n  l2=list(map(int,input().split()))\n  n=l2[0]\n  l2=l2[1:]\n  if n%2==0:\n   s+=sum(l2[:len(l2)//2])\n  else:\n   l.append(sum(l2[:len(l2)//2]))\n   l.append(sum(l2[:len(l2)//2+1]))\n   l1.append(l)\n   l=[]\n   l3.append(l1[len(l1)-1][1]-l1[len(l1)-1][0])\n for i in range(len(l3)):\n  if i<len(l3)//2:\n   t=l3.index(min(l3))\n   s+=min(l1[t])\n   l1.remove(l1[t])\n  else:\n   t=l3.index(min(l3))\n   s+=max(l1[t])\n   l1.remove(l1[t])\n print(s)\n  \n \n \n", "for _ in range(int(input())):\n s=0\n l1=[]\n for i in range(int(input())):\n  l=list(map(int,input().split()))\n  n=l[0]\n  l=l[1:]\n  if n%2==0:\n   s+=sum(l[:n//2])\n  else:\n   l1.append(l)\n l2,l3=[],[]\n for i in range(len(l1)):\n  l2.append(sum(l1[i][:len(l1[i])//2]))\n  l2.append(sum(l1[i][:len(l1[i])//2+1]))\n  l3.append(l2)\n  l2=[]\n l3.sort()\n for i in range(len(l3)):\n  if i<len(l3)//2:\n   s+=min(l3[i])\n  else:\n   s+=max(l3[i])\n print(s)\n", "for _ in range (int(input())):\n n1=int(input())\n sum1=0\n for i in range(n1):\n  li=[int(i) for i in input().split()]\n  li.pop(0)\n  if len(li)%2==0:\n   n=(len(li))//2\n  else:\n   n=(len(li)//2)+1\n  sum1+=sum(li[:n])\n print(sum1)\n \n  \n", "# cook your dish here\nfor _ in range(int(input())):\n n=int(input()) \n chef,f=0,[]\n for i in range(n):\n  l=list(map(int,input().split()))\n  b=l[0]\n  if b&1:\n   f.append(l[(b//2)+1]) \n  for i in range(1,(b//2)+1):\n   chef+=l[i]\n print(chef+sum((sorted(f))[::2]))", "# cook your dish here\nfor _ in range(int(input())):\n n=int(input()) \n chef,f=0,[]\n for i in range(n):\n  l=list(map(int,input().split()))\n  b=l[0]\n  if b&1:\n   f.append(l[(b//2)+1]) \n  for i in range(1,(b//2)+1):\n   chef+=l[i]\n print(chef+sum((sorted(f,reverse=True))[::2]))", "# cook your dish here\nfor _ in range(int(input())):\n n=int(input()) \n chef,f=0,[]\n for i in range(n):\n  l=list(map(int,input().split()))\n  b=l[0]\n  if b&1:\n   f.append(l[(b//2)+1]) \n  for i in range(1,(b//2)+1):\n   chef+=l[i]\n print(chef+sum(sorted(f)[::2]))"]