["t = int(input())\r\nfor i in range(t):\r\n    q = input().split()\r\n    n = int(q[0])\r\n    m = int(q[1])\r\n    k = int(q[2])\r\n    sumax = 0\r\n    b = []\r\n    for j in range(n):\r\n        a = [int(k) for k in input().split()]\r\n        b = b + [a]\r\n    for j in range(n):\r\n        su = 0\r\n        for x in range(k):\r\n            su = su +b[j][x]\r\n            if su > sumax:\r\n                sumax = su\r\n        for a in range(1, m-k+1):\r\n            su = su - b[j][a-1] +b[j][k+a-1]\r\n            if su > sumax:\r\n                sumax = su\r\n    for j in range(m):\r\n        su = 0\r\n        for x in range(k):\r\n            su = su + b[x][j]\r\n            if su > sumax:\r\n                sumax = su\r\n        for a in range(1, n-k+1):\r\n            su = su - b[a-1][j] + b[a+k-1][j]\r\n            if su > sumax:\r\n                sumax = su\r\n    print(sumax)\r\n            \r\n    \r\n", "for T in range(int(input())):\r\n    n, m, k = map(int, input().split())\r\n    a = []\r\n    for i in range(n):\r\n        a.append(list(map(int, input().split())))\r\n    v = [[0 for x in range(m)] for x in range(n)]\r\n    for i in range(n):\r\n        v[i] = a[i].copy()\r\n    for i in range(n):\r\n        for j in range(1, m):\r\n            a[i][j] += a[i][j-1]\r\n    #print(a)\r\n    for i in range(m):\r\n        for j in range(1, n):\r\n            v[j][i] += v[j-1][i]\r\n    #print(v)\r\n    maxx = 0\r\n    for i in range(n):\r\n        for j in range(k-1, m):\r\n            if j == k-1:\r\n                maxx = max(maxx, a[i][j])\r\n            else:\r\n                maxx= max(maxx, a[i][j]-a[i][j-k])\r\n    for i in range(m):\r\n        for j in range(k-1, n):\r\n            if j == k-1:\r\n                maxx = max(maxx, v[j][i])\r\n            else:\r\n                maxx= max(maxx, v[j][i]-v[j-k][i])\r\n    print(maxx)", "t=int(input())\r\nfor z in range (t):\r\n\tn,m,k=list(map(int,input().split()))\r\n\ta=[([0]*m) for i in range (n)]\r\n\tfor i in range (n):\r\n\t\ta[i]=list(map(int,input().split()))\r\n\r\n\ts2=0\r\n\r\n\tfor i in range (n):\r\n\t\ts3=0\r\n\t\tco=0\r\n\t\tfor j in range (0,m):\r\n\t\t\tif(co==k):\r\n\t\t\t\ts3=s3+a[i][j]-a[i][j-k]\r\n\t\t\telse:\r\n\t\t\t\ts3=s3+a[i][j]\r\n\t\t\t\tco+=1\r\n\t\t\tif(s3>s2):\r\n\t\t\t\ts2=s3\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t\r\n\ts3=0\r\n\ts4=0\r\n\tfor i in range (m):\r\n\t\ts3=0\r\n\t\tco=0\r\n\t\tfor j in range (0,n):\r\n\t\t\tif(co==k):\r\n\t\t\t\ts3=s3+a[j][i]-a[j-k][i]\r\n\t\t\telse:\r\n\t\t\t\ts3=s3+a[j][i]\r\n\t\t\t\tco+=1\r\n\t\t\tif(s3>s2):\r\n\t\t\t\ts2=s3\r\n\t\t\t\r\n\t\t\r\n\tprint(s2)\r\n", "for t in range(int(input())):\r\n    n,m,k=list(map(int,input().split(' ')))\r\n    a=[]\r\n    for i in range(n):\r\n        a.append(list(map(int,input().split(' '))))\r\n    max=0\r\n    b=[0 for i in range(n)]\r\n    c=[0 for i in range(m)]\r\n    for i in range(n):\r\n        b[i]=sum(a[i][:k])\r\n        if b[i]>max:\r\n            max=b[i]\r\n    for i in range(m):\r\n        g=0\r\n        for x in range(k):\r\n            g=g+a[x][i]\r\n        c[i]=g\r\n        if g>max:\r\n            max=g\r\n    #print(b,c)\r\n    for i in range(n):\r\n        for j in range(1,m-k+1):\r\n            b[i]=b[i]+a[i][j+k-1]-a[i][j-1]\r\n            #print(b[i])\r\n            if b[i]>max:\r\n                max=b[i]\r\n    for i in range(m):\r\n        for j in range(1,n-k+1):\r\n            c[i]=c[i]+a[j+k-1][i]-a[j-1][i]\r\n            if c[i]>max:\r\n                max=c[i]\r\n\r\n    print(max)\r\n    \r\n", "import numpy as np\n\ndef s(arr, n, m, k):\n\tmax_sum = 0\n\tfor i in range(n):\n\t\tprev_sum = 0\n\t\tcurr_sum = 0\n\t\tfor a in range(k):\n\t\t\tcurr_sum += arr[i][a]\n\t\t\t\n\t\tprev_sum = curr_sum\n\t\tif max_sum < prev_sum: max_sum = prev_sum\n\t\tj = 1\n\t\twhile(j+k) <= m:\n\t\t\tcurr_sum = prev_sum - arr[i][j-1] + arr[i][j+k-1]\n\t\t\tprev_sum = curr_sum\n\t\t\tif max_sum < prev_sum: max_sum = prev_sum\n\t\t\tj += 1\n\t\t\t\n\treturn max_sum\n\nfor _ in range(int(input())):\n\tn,m,k = list(map(int, input().split()))\n\tarr = []\n\tfor i in range(n):\n\t\tarr.append(list(map(int, input().split())))\n\t\t\n\tans = s(arr, n, m, k)\n\t\n\tarr = np.array(arr)\n\tarr = arr.T\n\t\n\tl = []\n\tfor i in range(m):\n\t\tl.append(list(arr[i]))\n\t\t\n\ttemp = s(l, m, n, k)\n\tif ans < temp: ans = temp\n\t\n\tprint(ans)\n\t\t\n\t\n\t\t\t\n\t\t\n", "def maxSum(arr, n, k): \r\n    res = 0\r\n    for i in range(k): \r\n        res += arr[i] \r\n    curr_sum = res \r\n    for i in range(k, n): \r\n        curr_sum += arr[i] - arr[i-k] \r\n        res = max(res, curr_sum) \r\n    return res \r\nfor _ in range(int(input())):\r\n    n,m,k=map(int,input().split())\r\n    ma=0\r\n    J=[]\r\n    for i in range(n):\r\n        a=[int(x) for x in input().split()]\r\n        s1=maxSum(a,m,k)\r\n        if ma<s1:ma=s1\r\n        J.append(a)\r\n        #print(J)\r\n    for i in range(m):\r\n        arr=[x[i] for x in J]\r\n        ss=maxSum(arr,n,k)\r\n        if ma<ss:ma=ss \r\n    print(ma)", "t=int(input())\r\nfor _ in range(t):\r\n    n,m,k=list(map(int,input().split()))\r\n    main=[]\r\n    for i in range(n):\r\n        l=list(map(int,input().split()))\r\n        main.append(l)\r\n    maxi=0\r\n    for i in range(n):\r\n        q=main[i]\r\n        sum1=sum(q[0:k])\r\n        i=0\r\n        j=k-1\r\n        while(j<m):\r\n         \r\n            if maxi<sum1:\r\n                maxi=sum1\r\n            j+=1\r\n            if j<m:\r\n                sum1+=q[j]\r\n            i+=1\r\n            sum1-=q[i-1]\r\n    new=[]\r\n    for i in range(m):\r\n        l=[0]*n\r\n        new.append(l)\r\n    \r\n    for i in range(n):\r\n        for j in range(m):\r\n            new[j][i]=main[i][j]\r\n    for i in range(m):\r\n        q=new[i]\r\n        sum1=sum(q[0:k])\r\n        i=0\r\n        j=k-1\r\n        while(j<n):\r\n          \r\n            if maxi<sum1:\r\n                maxi=sum1\r\n            j+=1\r\n            if j<n:\r\n                sum1+=q[j]\r\n            i+=1\r\n            sum1-=q[i-1]\r\n    print(maxi)\r\n    \r\n                \r\n                \r\n            \r\n", "t=int(input())\r\nfor _ in range(t):\r\n    n,m,k=list(map(int,input().strip().split()))\r\n    a=list()\r\n    for i in range(n):\r\n        b=list(map(int,input().strip().split()))\r\n        a.append(b)\r\n    sm1,sm2=0,0\r\n    for i in range(n):\r\n        for j in range(k):\r\n            sm2+=a[i][j]\r\n        if sm2>sm1:\r\n            sm1=sm2\r\n        for j in range(k,m):\r\n            sm2+=(a[i][j]-a[i][j-k])\r\n            if sm2>sm1:\r\n                sm1=sm2\r\n        sm2=0\r\n    for i in range(m):\r\n        for j in range(k):\r\n            sm2+=a[j][i]\r\n        if sm2>sm1:\r\n            sm1=sm2\r\n        for j in range(k,n):\r\n            sm2+=(a[j][i]-a[j-k][i])\r\n            if sm2>sm1:\r\n                sm1=sm2\r\n        sm2=0\r\n    print(sm1)\r\n", "t=int(input().strip())\r\nfor p in range(t):\r\n    n,m,k=input().strip().split()\r\n    n,m,k=int(n),int(m),int(k)\r\n    arr=[]\r\n    rmax=[]\r\n    cmax=[]\r\n    for i in range(n):\r\n    \tarr2=list(map(int,input().strip().split()))\r\n    \tarr.append(arr2)\r\n    \trow_sum=[]\r\n    \trow_sum.append(sum(arr2[:k]))\r\n    \tfor j in range(1,m-k+1):\r\n    \t\trow_sum.append(row_sum[j-1]-arr2[j-1]+arr2[j+k-1])\r\n    \trmax.append(max(row_sum))\r\n    for i in range(m):\r\n    \tcol_sum=[]\r\n    \ts=0\r\n    \tfor j in range(k):\r\n    \t\ts+=arr[j][i]\r\n    \tcol_sum.append(s)\r\n    \tfor j in range(1,n-k+1):\r\n    \t\tcol_sum.append(col_sum[j-1]-arr[j-1][i]+arr[j+k-1][i])\r\n    \tcmax.append(max(col_sum))\r\n    print(max(max(rmax),max(cmax)))\r\n", "t=int(input())\r\nfor tt in range(t):\r\n    n,m,k=map(int,input().split())\r\n    k-=1\r\n    arr=[]\r\n    for i in range(n):\r\n        l=list(map(int,input().split()))\r\n        arr.append(l)\r\n    mm=0\r\n    for i in range(n):\r\n        x=[0]*(len(arr[i]))\r\n        x[0]=arr[i][0]\r\n        for j in range(1,m):\r\n            x[j]=x[j-1]+arr[i][j]\r\n        for j in range(m):\r\n            if j+k<m:\r\n                if j>0:\r\n                    mm=max(mm,x[j+k]-x[j-1])\r\n                else:\r\n                    mm=max(mm,x[j+k])\r\n    for i in range(m):\r\n        x=[]\r\n        for j in range(n):\r\n            x.append(arr[j][i])\r\n        # print(x)\r\n        y=[0]*(n)\r\n        y[0]=x[0]\r\n        for j in range(1,n):\r\n            y[j]=y[j-1]+x[j]\r\n        for j in range(n):\r\n            if j+k<n:\r\n                if j>0:\r\n                    mm=max(mm,y[j+k]-y[j-1])\r\n                else:\r\n                    mm=max(mm,y[j+k])\r\n    print(mm)", "t=int(input())\r\nfor ii in range(t):\r\n    n,m,k=[int(x) for x in input().split()]\r\n    a=[]\r\n    for i in range(n):\r\n        pp=[int(x) for x in input().split()]\r\n        a.append(pp)\r\n    arr=[]\r\n    for i in range(m):\r\n        pp=[]\r\n        for j in range(n):\r\n            pp.append(a[j][i])\r\n        arr.append(pp)\r\n    #print(a,arr)\r\n    s=0\r\n    for i in a:\r\n        for j in range(m-k+1):\r\n            s=max(s,sum(i[j:j+k]))\r\n    for i in arr:\r\n        for j in range(n-k+1):\r\n            s=max(s,sum(i[j:j+k]))\r\n    print(s)\r\n            \r\n            \r\n"]