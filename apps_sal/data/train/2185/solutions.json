["n, m = list(map(int, input().split()))\ng = [[] for _ in range(n)]\nfor i in range(m):\n    p, q = list(map(int, input().split()))\n    g[p - 1].append(q - 1)\n    g[q - 1].append(p - 1)\n\ncomp = [-1] * n\ndef shortest(root):\n    dist = [-1] * n\n    q = [0] * n\n    left, right = 0, 1\n    q[left] = root\n    dist[root] = 0\n    good = True\n    while left < right:\n        x = q[left]\n        left = left + 1\n        for i in g[x]:\n            if dist[i] is -1: \n                dist[i] = 1 + dist[x]\n                q[right] = i\n                right = right + 1\n            elif dist[i] == dist[x]:\n                good = False \n    far = 0\n    for i in dist: \n        if far < i:\n            far = i\n    return good, far, dist\n\narr = [0] * n\ngood = True\nfor i in range(n):\n    _, opt, dist = shortest(i)\n    if _ is False: good = False\n    if comp[i] is -1:\n        for j in range(n): \n            if dist[j] is not -1: comp[j] = i\n    if arr[comp[i]] < opt: \n        arr[comp[i]] = opt\n\nif good is False: print('-1')\nelse: print(sum(arr))\n\n", "n, m = list(map(int, input().split()))\ng = [[] for _ in range(n)]\nfor i in range(m):\n    p, q = list(map(int, input().split()))\n    g[p - 1].append(q - 1)\n    g[q - 1].append(p - 1)\n\ncomp = [-1] * n\ndef shortest(root):\n    dist = [-1] * n\n    q = [0] * n\n    left, right = 0, 1\n    q[left] = root\n    dist[root] = 0\n    good = True\n    while left < right:\n        x = q[left]\n        left = left + 1\n        for i in g[x]:\n            if dist[i] is -1: \n                dist[i] = 1 + dist[x]\n                q[right] = i\n                right = right + 1\n            elif dist[i] == dist[x]:\n                good = False \n    far = 0\n    for i in dist:\n        if i > far: far = i\n    return good, far, dist\n\narr = [0] * n\ngood = True\nfor i in range(n):\n    _, opt, dist = shortest(i)\n    if _ is False: good = False\n    if comp[i] is -1: \n        for j in range(n):\n            if dist[j] is not -1:\n                comp[j] = i\n    if arr[comp[i]] < opt: \n        arr[comp[i]] = opt\n\nif good is False: print('-1')\nelse: print(sum(arr))\n\n"]