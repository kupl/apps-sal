["MOD = 10**9+7\n\ns = input()\nn = int(input())\nqs = [['',s]]+[input().split('->') for i in range(n)]\n\nds = {}\nfor i in range(10):\n    ds[str(i)] = (10,i)\n\nfor i in range(n,-1,-1):\n    out = 0\n    mul = 1\n    for d in qs[i][1]:\n        out = (out * ds[d][0] + ds[d][1]) % MOD\n        mul = (mul * ds[d][0]) % MOD\n    ds[qs[i][0]] = (mul,out)\n\nprint(ds[''][1])\n", "def main():\n    s = input()\n    n = int(input())\n    \n    M = 1000000007\n    a = {str(s):[10, s] for s in range(10)}\n    d = [['_', s]] + [input().split('->') for _ in range(n)]\n    \n    for di, ti in reversed(d):\n        _p = 1\n        _v = 0\n        for c in ti:\n            _v = (_v * a[c][0] + a[c][1]) % M\n            _p = (_p * a[c][0]) % M\n        a[di] = [_p, _v]\n\n    print(a['_'][1])\n\n    \ndef __starting_point():\n    main()\n\n\n__starting_point()", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n", "m = 1000000007\np = [(0, input())] + [input().split('->') for i in range(int(input()))]\ns = [(10, i) for i in range(10)]\nfor d, t in p[::-1]:\n    a, b = 1, 0\n    for q in t:\n        x, y = s[int(q)]\n        a, b = a * x % m, (b * x + y) % m\n    s[int(d)] = a, b\nprint(s[0][1])", "MOD = 1000000007\nst,n,t,mp=input(),int(input()),[],{}\n\nt.append(['',st])\n\nfor i in range(10):\n\tmp[str(i)]=(10,i)\n\nfor i in range(n):\n\tt.append(input().split(\"->\"))\n\nfor i in range(n,-1,-1):\n\ta,b=1,0\n\tfor j in t[i][1]:\n\t\ta,b=a*mp[j][0]%MOD,(b*mp[j][0]+mp[j][1])%MOD\n\tmp[t[i][0]]= a,b\n\nprint(mp[''][1])\n\n\n\n\n# Made By Mostafa_Khaled\n"]