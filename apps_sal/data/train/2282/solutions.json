["n =int(input())\nw=[]\nh=[]\nc=[]\ncntw={}\ncnth={}\ngcdC=0\ncntC=0\ndef insert1(a,b,c):\n\tif not a in b :\n\t\tb[a]=c\n\telse :\n\t\tb[a]=b[a]+c\n\ndef gcd(a,b): \n\tif a % b == 0 :\n\t\treturn b\n\telse :\n\t\treturn gcd(b,a%b)\n\nfor i in range(0, n):\n\ta,b,d = map(int,input().split())\n\tw.append(a)\n\th.append(b)\n\tc.append(d)\n\tinsert1(a,cntw,d)\n\tinsert1(b,cnth,d)\n\tcntC += d\n\tif gcdC == 0 :\n\t\tgcdC = d\n\telse :\n\t\tgcdC = gcd(gcdC, d)\n\nfor i in range(0, n):\n\tif cntw[w[i]] * cnth[h[i]] != cntC * c[i]:\n\t\tprint (0)\n\t\treturn\n\nans = 0\ni = 1\nwhile (i * i <= gcdC) :\n\tif gcdC % i == 0 :\n\t\tans += 1\n\t\tif i * i != gcdC :\n\t\t\tans += 1\n\ti += 1\n\nprint (ans)", "n =int(input())\nw=[]\nh=[]\nc=[]\ncntw={}\ncnth={}\nmultMayotC=0\ncntC=0\n\ndef insert1(a,b,c):\n    if not a in b :\n        b[a]=c\n    else :\n        b[a]=b[a]+c\n\ndef multMayot(a,b): \n    if a % b == 0 :\n        return b\n    else :\n        return multMayot(b,a%b)\n\nfor i in range(0, n):\n    a,b,d = map(int,input().split())\n    w.append(a)\n    h.append(b)\n    c.append(d)\n    insert1(a,cntw,d)\n    insert1(b,cnth,d)\n    cntC += d\n    \n    if multMayotC == 0 :\n        multMayotC = d\n    else:\n        multMayotC = multMayot(multMayotC, d)\n\nfor i in range(0, n):\n    if cntw[w[i]] * cnth[h[i]] != cntC * c[i]:\n        print (0)\n        return\n\nresult = 0\ni = 1\nwhile (i * i <= multMayotC) :\n    if multMayotC % i == 0 :\n        result += 1\n        if i * i != multMayotC :\n            result += 1\n    i += 1\n\nprint (result)"]