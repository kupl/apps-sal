arr = [[1, 1, 1], [2, 3, 2], [4, 11, 6], [8, 59, 30], [16, 539, 270], [32, 9179, 4590], [64, 302939, 151470], [128, 19691099, 9845550], [256, 2540151899, 1270075950], [512, 652819038299, 326409519150], [1024, 334896166647899, 167448083323950], [2048, 343268570814097499, 171634285407048750], [4096, 703357301598085777499, 351678650799042888750], [8192, 2881654864647357430417499, 1440827432323678715208750], [16384, 23609398306055799427410577499, 11804699153027899713705288750], [32768, 386839991244724273618122312337499, 193419995622362136809061156168750], [65536, 12676359673098369722192250052987537499, 6338179836549184861096125026493768750], [131072, 830770583895847856483313491722644245137499, 415385291947923928241656745861322122568750], [262144, 108891592742980466092837349300562149142907537499, 54445796371490233046418674650281074571453768750], [524288, 28545386579608614283906846932395864587067496417937499, 14272693289804307141953423466197932293533748208968750], [1048576, 14966032184436420774295236871338895448489030629464033937499, 7483016092218210387147618435669447724244515314732016968750], [2097152, 15693037129859788786248176592837924972690282270351508314081937499, 7846518564929894393124088296418962486345141135175754157040968750], [4194304, 32910699895996845632446722286199832870252343534114476715401877473937499, 16455349947998422816223361143099916435126171767057238357700938736968750], [8388608, 138037513127279049620399449518619390006863755746854020259793671698323425937499, 69018756563639524810199724759309695003431877873427010129896835849161712968750], [16777216, 1157942724957111181157129405826936282586087363231861356037487532551601175730145937499, 578971362478555590578564702913468141293043681615930678018743766275800587865072968750], [33554432, 19427056370176769979399471138639574458120108873898759284155188468412776622679791835105937499, 9713528185088384989699735569319787229060054436949379642077594234206388311339895917552968750], [67108864, 651863861360319626430170934556915312303502499161941367183313233065729129529675355585009227745937499, 325931930680159813215085467278457656151751249580970683591656616532864564764837677792504613872968750], [134217728, 43745843870408406166952773174103864509808588243421336348220398010521552280174496931781380288556373985937499, 21872921935204203083476386587051932254904294121710668174110199005260776140087248465890690144278186992968750], [268435456, 5871467817474786578237996065680342304630206938728110954803295012448320852599792701901164786815401204867209185937499, 2935733908737393289118998032840171152315103469364055477401647506224160426299896350950582393407700602433604592968750], [536870912, 1576110146844636921106782728655104702459842815602051462899328841772385696950254992040103938381099797066879922141730785937499, 788055073422318460553391364327552351229921407801025731449664420886192848475127496020051969190549898533439961070865392968750]]
t = int(input())
for _ in range(t):
    [d, m] = [int(x) for x in input().split()]
    for p in arr:
        if d >= p[0] and d < p[0] * 2:
            print((p[1] + p[2] * (d - p[0])) % m)
