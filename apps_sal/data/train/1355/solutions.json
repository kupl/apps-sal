["# cook your dish here\ndef index(n,val):\n    while(val >= n):\n        val = val//2\n    return n - val\nt = int(input())\nfor _ in range(t):\n    n = int(input())\n    arr = list(map(int,input().split())) \n    new = [0 for i in range(n)]\n    for i in range(n):\n        if arr[i]<=n :\n            new[i] = arr[i] + arr[arr[i]-1]\n        else:\n            new[i] = arr[index(n,arr[i]) - 1]\n    print(*new)", "from sys import stdin\r\nfor _ in range(int(stdin.readline().strip())) :\r\n    n = int(stdin.readline().strip())\r\n    a = list(map(int,stdin.readline().split()))\r\n    b = []\r\n    for i,ch in enumerate(a) :\r\n        if ch <= n :\r\n            b.append(ch+a[ch-1])\r\n        else :\r\n            while ch >= n :\r\n                ch//=2\r\n            d = n-ch-1\r\n            b.append(a[d])\r\n    print(' '.join(map(str,b)))\r\n", "for i in range(int(input())):\r\n    n=int(input())\r\n    a=list(map(int,input().split()))\r\n    ans=[0 for i in range(n)]\r\n    for i in range(n):\r\n        if a[i]<=n:\r\n            ans[i]=a[i]+a[a[i]-1]\r\n        else:\r\n            x=a[i]\r\n            while x>=n:\r\n                x//=2\r\n            ans[i]=a[n-x-1]\r\n    print(*ans)"]