["from math import gcd\r\nfrom math import ceil\r\nfrom itertools import combinations as c\r\nt=int(input())\r\nfor _ in range(t):\r\n    n,m,a,d=list(map(int,input().split()))\r\n    \r\n    l=[]\r\n    for i in range(5):\r\n        l.append(a+i*d)\r\n    ans=m-n+1\r\n    for i in range(1,6):\r\n        x=list(c(l,i))\r\n        for j in x:\r\n            e=j[0]\r\n            for v in j:\r\n                e=(e*v)//gcd(e,v)\r\n            #print(e)\r\n            if i%2:\r\n                ans-=m//e-(n-1)//e\r\n            else:\r\n                ans+=m//e-(n-1)//e\r\n    print(ans)\r\n        \r\n    \r\n"]