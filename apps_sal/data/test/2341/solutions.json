["n,m=map(int,input().split())\nL=[]\nfor i in ' '*n:L.append(input())\ndp=[[0]*m for i in range(n)]\nfor i in range(n+m-1):\n    rightmin=max(0,i-(n-1))\n    leftmin=max(0,i-(m-1))\n    left=i-rightmin\n    jstart = max(0, i - (n - 1))\n    for j in range(abs(left-leftmin)+1):\n        jj=jstart+j\n        ii=i-jj\n        if jj<2 or ii<1 or ii==n-1:\n            dp[ii][jj]=1\n            continue\n        if L[ii+1][jj-1]==L[ii][jj-1]==L[ii][jj-2]==L[ii-1][jj-1]==L[ii][jj]:\n            dp[ii][jj]=min(dp[ii+1][jj-1],dp[ii][jj-1],dp[ii][jj-2],dp[ii-1][jj-1])+1\n        else:dp[ii][jj]=1\nct=0\nfor i in dp:\n    for j in i:\n        ct+=j\nprint(ct)", "import sys\ninput = sys.stdin.readline\n\nn,m=list(map(int,input().split()))\nMAP=[input().strip() for i in range(n)]\n\nCOUNT0=[[1]*m for i in range(n)]\nCOUNT1=[[1]*m for i in range(n)]\nCOUNT2=[[1]*m for i in range(n)]\nCOUNT3=[[1]*m for i in range(n)]\n\nfor i in range(1,n-1):\n    for j in range(1,m-1):\n        if MAP[i][j]==MAP[i-1][j]==MAP[i][j-1]:\n            COUNT0[i][j]=min(COUNT0[i-1][j],COUNT0[i][j-1])+1\n\nfor i in range(n-2,0,-1):\n    for j in range(m-2,0,-1):\n        if MAP[i][j]==MAP[i+1][j]==MAP[i][j+1]:\n            COUNT1[i][j]=min(COUNT1[i+1][j],COUNT1[i][j+1])+1\n\nfor i in range(1,n-1):\n    for j in range(m-2,0,-1):\n        if MAP[i][j]==MAP[i-1][j]==MAP[i][j+1]:\n            COUNT2[i][j]=min(COUNT2[i-1][j],COUNT2[i][j+1])+1\n\nfor i in range(n-2,0,-1):\n    for j in range(1,m-1):\n        if MAP[i][j]==MAP[i+1][j]==MAP[i][j-1]:\n            COUNT3[i][j]=min(COUNT3[i+1][j],COUNT3[i][j-1])+1\n\nANS=0\nfor i in range(n):\n    for j in range(m):\n        ANS+=min(COUNT0[i][j],COUNT1[i][j],COUNT2[i][j],COUNT3[i][j])\n\nprint(ANS)\n\n", "\ndef tc():\n    n, m = list(map(int, input().split()))\n    mat = [input() for _ in range(n)]\n    alpha = 'abcdefghijklmnopqrstuvwxyz'\n\n    dp = [[0] * m for _ in range(n)]\n    ans = 0\n    for i in range(n):\n        for j in range(m):\n\n            if j == 0 or j == m - 1 or i < 2:\n                dp[i][j] = 1\n            elif mat[i][j] == mat[i - 1][j] and mat[i][j] == mat[i - 1][j - 1] and mat[i][j] == mat[i - 1][j + 1] and mat[i][j] == mat[i - 2][j]:\n                dp[i][j] = min(dp[i - 1][j], dp[i - 1][j - 1], dp[i - 1][j + 1], dp[i - 2][j]) + 1\n            else:\n                dp[i][j] = 1\n            ans += dp[i][j]\n\n    print(ans)\n\n\n#################\ntc()\n"]