["mod = 10 ** 9 + 7\nn = int(input())\nh = list([int(x) - 1 for x in input().split()])\nans = x = 0\nfor i in range(n):\n    ans += h[i] + min(h[i], h[i - 1]) * x\n    if i < n - 1:\n        x *= min(h[i - 1], h[i], h[i + 1])\n        x += min(h[i], h[i + 1])\n    ans %= mod\n    x %= mod\nprint(ans)\n", "mod = 10 ** 9 + 7\nn = int(input())\nh = list([int(x) - 1 for x in input().split()])\nans = x = 0\nfor i in range(n):\n    ans += h[i] + min(h[i], h[i - 1]) * x\n    if i < n - 1:\n        x *= min(h[i - 1], h[i], h[i + 1])\n        x += min(h[i], h[i + 1])\n    ans %= mod\n    x %= mod\nprint(ans)\n\n"]