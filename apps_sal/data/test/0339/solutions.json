["import sys\n\ndef read_int():\n    return int(input())\n\ndef read_ints():\n    return [int(x) for x in input().split()]\n\nn = read_int()\nk = read_int()\na = read_int()\nb = read_int()\n\ncost = 0\n\nif k == 1:\n    cost = (n - 1) * a\nelse:\n    while n != 1:\n        if n % k == 0:\n            if b < (n - n // k) * a:\n                cost += b\n            else:\n                cost += (n - n // k) * a\n            n = n // k\n        else:\n            cost += (n % k) * a\n            n -= n % k\n            if n == 0:\n                n += 1\n                cost -= a\n\nprint(cost)\n", "from sys import stdin, stdout\nfrom random import randrange\n\nn = int(stdin.readline())\nk = int(stdin.readline())\na = int(stdin.readline())\nb = int(stdin.readline())\n\nans = 0\n\nif k == 1:\n    stdout.write(str((n - 1) * a))\nelse:\n    while n != 1:\n        if n % k:\n            ans += (n % k) * a\n            n = (n // k) * k\n            continue\n        \n        \n        if (n - (n // k)) * a <= b:\n            ans += (n - 1) * a\n            n = 1\n        else:\n            ans += b\n            n //= k\n\n    stdout.write(str(ans))", "x = int(input())\nk = int(input())\na = int(input())\nb = int(input())\n\nc = 0\n\nwhile x > 1:\n\tif x % k > 0:\n\t\tif x > k:\t\t\t\n\t\t\tc += a * (x % k)\n\t\t\tx -= x % k\n\t\telse:\t\n\t\t\tc += a * (x % k - 1)\n\t\t\tx = 1\n\n\telse:\n\t\tif (x-x//k)*a >= b:\n\t\t\tc += b\n\t\t\tx = x//k\n\t\telse:\n\t\t\tc += (x-1)*a\n\t\t\tx = 1\n\nprint(c)\n", "n = int(input())\nk = int(input())\nA = int(input())\nB = int(input())\ncoins = 0\nwhile (n!=1):\n\tif(n%k == 0 and ((n-n/k)*A) > B):\n\t\tcoins += B\n\t\tn/=k\n\telif (n%k == 0):\n\t\tcoins += A*(n-1)\n\t\tn = 1\n\telse:\n\t\tcoins += A*(n%k)\n\t\tn = n - (n%k)\nprint(int(coins))\n", "number = int(input())\ndivisor = int(input())\ndecrement_cost = int(input())\ndivision_cost = int(input())\n\nfinal_cost = 0\nwhile number != 1:\n\tremainder = number % divisor\n\tif remainder != 0:\n\t\tfinal_cost += decrement_cost * remainder\n\t\tnumber -= remainder\n\n\tjump = number - number // divisor\n\n\tif division_cost < jump * decrement_cost:\n\t\tfinal_cost += division_cost\n\t\tnumber //= divisor\n\telse:\n\t\tfinal_cost += decrement_cost * (number - 1)\n\t\tnumber = 1\n\nprint(final_cost)", "n = int(input())\nk = int(input())\na = int(input())\nb = int(input())\nc = 0\nwhile(n>1):\n    if(n<k):\n        c += a*(n - 1)\n        n = 1\n    else:\n        if(n%k!=0):\n            t = n%k\n            n -= t\n            c += t*a\n        else:\n            if(b<(n-n//k)*a):\n                n = n//k\n                c += b\n            else:\n                c += a*(n - 1)\n                n = 1\nprint(c)\n", "def solve(n, k, A, B):\n    if k == 1:\n        return A*(n-1)\n    res = 0\n    while n >= k:\n        res += A * (n % k)\n        n -= n % k\n        diff = n-n//k\n        if A*diff > B:\n            res += B\n            n //= k\n        else:\n            res += A*(n-1)\n            n = 1 # finish loop\n    res += A*(n-1)\n    return res\n\nn, k, A, B = [int(input()) for i in range(4)]\nprint(solve(n, k, A, B))", "n = int(input());\nk = int(input());\na = int(input());\nb = int(input());\n#inf = 100000000000000000000000000000;\nost = 0;\nres = 0;\nwhile a * (n // k) + b + (n % k) * a < n * a:\n    ost = ost + (n % k) * a;\n    res = res + b;\n    n = n // k;\n#print(n);\n#print(res);\n#print(ost);\nres = res + (n - 1) * a + ost;\nprint(res);", "n=int(input())\nk=int(input())\na=int(input())\nb=int(input())\nans=0\nif k==1:\n    print((n-1)*a)\n    return\nelse:\n    while n>1:\n        ans+=(n%k)*a\n        n-=n%k\n        if b>(n-n//k)*a:\n            print((n-1)*a+ans)\n            return\n        else:\n            n//=k\n            ans+=b\nprint(ans)\n    \n    \n    \n", "n=int(input())\nk=int(input())\na=int(input())\nb=int(input())\nx=n\nc=0\nif k==1:\n    c=a*(n-1)\nelse:\n    while x>=k:\n        y=x%k\n        c+=y*a\n        x-=y\n        c+=min(b,a*(x-x//k))\n        x=(x//k)\n    c+=a*(x-1)\nprint(c)", "n = int(input())\nk = int(input())\nA = int(input())\nB = int(input())\n\nans = 0\nif k == 1:\n\tprint(A*(n-1))\n\treturn\n\nwhile n > 1:\n\tsubt = (n % k)\n\tans += A * subt\n\tn -= (n%k)\n\tans += min(A * (n - (n // k)),B)\n\tn //= k\n\nif n == 0:\n\tans -= A\n\nprint(ans)", "n = int(input())\nk = int(input())\na = int(input())\nb = int(input())\n\nr = 0\n\nif k == 1:\n    print((n - 1) * a)\n    return\n\nwhile n != 1:\n    if n % k != 0:\n        r += n % k * a\n        n -= n % k\n    elif n < k:\n        r += (n - 1) * a\n        n = 1\n    else:\n        if n // k * (k - 1) * a < b:\n            r += n // k * (k - 1) * a\n        else:\n            r += b\n        n //= k\nprint(r)\n", "n=int(input())\nk=int(input())\na=int(input())\nb=int(input())\nans=0\nif ((k==1)|(k>n))&(n!=1):\n    ans=n*a-a\n    n=1\nwhile (n!=1):\n    if (n%k==0):\n        t=n//k\n        y=n-t\n        if (y*a<=b):\n            ans+=n*a-a\n            n=1\n        else:\n            ans+=b\n            n=t\n    else:\n        ans+=(n%k)*a\n        n-=n%k\nprint(ans)\n", "n = int(input())\nk = int(input())\na = int(input())\nb = int(input())\nx = n\ncost = 0\n\nif k == 1:\n    print(int((x - 1) * a))\n    return\n\nwhile x > 1:\n    if x < k:\n        cost += (x - 1) * a\n        break\n    rem = x % k\n    x -= rem\n    cost += a * rem\n    if rem == 0:\n        temp = (x // k) * (k - 1)\n        x //= k\n        cost += min(temp * a, b)\n\nprint(cost)\n", "from sys import stdin as cin\n\ndef main():\n    n = int(cin.readline())\n    k = int(cin.readline())\n    a = int(cin.readline())\n    b = int(cin.readline())\n    o = 0\n    if k == 1:\n        print((n - 1) * a)\n        return\n    while n > 1:\n        if n % k:\n            t = n - n // k * k\n            if t == n:\n                t -= 1\n            o += a * t\n            n -= t\n        else:\n            t = n // k\n            o += min(a * (n - t), b)\n            n = t\n        #print(n, o)\n    print(o)\n\nmain()\n", "n = int(input())\nk = int(input())\nA = int(input())\nB = int(input())\n\nres = 0\nwhile n>k:\n    if n % k >0:\n        res += (n%k) * A\n        n -= (n%k)\n\n    dif  = n - (n//k)\n    if dif*A > B:\n        res += B\n        n = n//k\n    else:\n        res += (n-1)*A\n        n = 1\n\nif n == k:\n    dif  = n - (n//k)\n    if dif*A > B:\n        res += B\n        n = n//k\n    else:\n        res += (n-1)*A\n        n = 1\n\nif n >1 :\n    res += (n-1)*A\n    n = 1\nprint(res)\n", "n = int(input())\nk = int(input())\na = int(input())\nb = int(input())\nans = 0\nif k > 1:\n    while n > 1:\n        new_n = max(1, n // k * k)\n        ans += (n - new_n) * a\n        n = new_n\n        while n % k == 0:\n            new_n = n // k\n            ans += min((n - new_n) * a, b)\n            n = new_n\nelse:\n    ans = (n - 1) * a\nprint(ans)", "n, k, A, B = (int(input()) for i in range(4))\n\nif k == 1:\n    print((n - 1) * A)\n\nelse:\n    x = n\n    ans = 0\n\n    while x != 1:\n        if 1 < x < k:\n            ans += (x - 1) * A\n            x = 1\n        else:\n            if x % k != 0:\n                ans += (x - (x // k) * k) * A\n                x = (x // k) * k\n\n            else:\n                d = x - (x // k)\n                ans += min(d * A, B)\n                x //= k\n\n    print(ans)\n", "inf = 0x3f3f3f3f3f3f3f3f\nM = mod = 1000000007\nmod2inv = 500000004\npt = lambda *a, **k: print(*a, **k, flush=True)\nrd = lambda: map(int, input().split())\nn = int(input())\nk = int(input())\na = int(input())\nb = int(input())\nr = 0\nif k == 1:\n    print((n - 1) * a)\n    return\nwhile n:\n    if n % k:\n        r += n % k * a\n        n -= n % k\n    r += min(b, (n - n // k) * a)\n    n //= k\npt(r - a)\n", "\nn=int(input())\nk=int(input())\na=int(input())\nb=int(input())\nx=n\nc=0\n\nif k==1:\n\tprint(a*(n-1))\nelif k > x:\n\tprint(a*(x-1))\nelse:\n\twhile x>=k:\n\t\tif x%k==0:\n\t\t\ttemp=x/k\n\t\t\tif b < (x-(temp))*a:\n\t\t\t\tc+=b\n\t\t\t\tx=temp\n\t\t\telse:\n\t\t\t\tc+=a*(x-(temp))\n\t\t\t\tx=temp\n\t\telse:\n\t\t\tt=x%k\n\t\t\tc+=(a*t)\n\t\t\tx=x-t\n\tif x==1:\n\t\tprint(int(c))\n\telse:\n\t\tprint(int(c)+int((x-1)*a))\n", "n = int(input(\"\"))\nk = int(input(\"\"))\na = int(input(\"\"))\nb = int(input(\"\"))\n\nans = 0\nwhile not n == 1:\n\tm = n % k\n\tn = n - m\n\tans = ans + m*a\n\n\tif (n-(n/k))*a > b:\n\t\tn = n / k\n\t\tans = ans + b\n\telse:\n\t\tans = ans + (n-1)*a\n\t\tn = 1\nprint(int(ans)) \n\"\"\"\n\tint64 ans = 0;\n\twhile(n != 1){\n\t\tint64 m = n % k;\n\t\tn -= m;\n\t\t//cout << \"m \" << m << endl;\n\t\tans += m*a;\n\n\t\tif((n-(n/k))*a > b){\n\t\t\tn /= k;\n\t\t\tans += b;\n\t\t}else{\n\t\t\tans += (n-1)*a;\n\t\t\tcout << ans;\n\t\t\treturn 0;\n\t\t}\n\n\t}\t\n\t\n\tcout << ans;\n\"\"\"", "n = int(input())\nk= int(input())\na = int(input())\nb = int(input())\nres = 0\nif k == 1:\n    print((n - 1) * a)\nelse:\n    while n != 1:\n        res += (n % k) * a\n        if b > (n // k)*(k - 1) * a:\n            res += (n // k)*(k - 1) * a\n        else:\n            res += b\n        n //= k\n        if n < k:\n            res += (n - 1) * a\n            break\n    print(res)", "n = int(input())\nk = int(input())\nc1 = int(input())\nc2 = int(input())\nif k == 1:\n\tk += n\nans = 0\nwhile n > 1:\n\tif n > k:\n\t\ttemp = n % k\n\t\tans += temp * c1\n\t\tn -= temp\n\tif n % k == 0:\n\t\tans += min(c2, (n - n // k) * c1)\n\t\tn //= k\n\telse:\n\t\tans += (n - 1) * c1\n\t\tn = 1\nprint(ans)", "n = int(input())\nk = int(input())\na = int(input())\nb = int(input())\nans = 0\nwhile n != 1:\n    if n % k == 0:\n        d = n // k\n        if b >= (n-d)*a:\n            ans += (n-1)*a\n            n=1\n        else:\n            ans += b\n            n = d\n    else:\n        r = n % k\n        ans += r*a\n        n = n - r\nprint(ans)"]