["n,k=[int(i) for i in input().split()]\nl=[int(i) for i in input().split()]\ncons=int(5e5+1)\nmod=10**9+7\ntpa=[1 for i in range(cons)]\ntpa[0]=1\nfor i in range(1,cons):\n    tpa[i]=(tpa[i-1]*2)%mod\nif k>n:\n    print(tpa[n-1])\nelse:\n    il=[[]for i in range(k+1)]\n    for i in range(n):\n        if l[i]<=k:\n            il[l[i]].append(i)\n    for i in range(k+1):\n        if len(il[i])==0:\n            print(tpa[n-1])\n            break\n    else:\n        pi=-1\n        dp=[-1 for i in range(n)]\n        dp[0]=1\n        si=max(il,key=lambda x:x[0])[0]\n        s=1\n        for i in range(1,si):\n            dp[i]=tpa[i]\n            s=(s+dp[i])%mod\n        ci=[0 for i in range(k+1)]\n        j=si\n        i=0\n        while j<n:\n            if l[i]>k :\n                s=(s-dp[i])%mod\n                i+=1\n            elif ci[l[i]]+1<len(il[l[i]]) and il[l[i]][ci[l[i]]+1]<=j:\n                s=(s-dp[i])%mod\n                ci[l[i]]+=1\n                i+=1\n            else:\n                dp[j]=s\n                pi=i\n                s=(s+dp[j])%mod\n                j+=1\n        print(dp[n-1])\n                \n                \n                \n        \n        \n            \n            \n"]