["def main():\n    import sys\n    input = sys.stdin.readline\n\n    # \u5076\u6570\u9577\u542b\u3081\u305f\u56de\u6587\u306e\u9577\u3055\u3092\u6c42\u3081\u308b\n    # R[2*i] = L: S[i]\u3092\u4e2d\u5fc3\u3068\u3059\u308b\u5947\u6570\u9577\u306e\u6700\u5927\u56de\u6587\n    # R[2*i+1] = L: S[i:i+2]\u3092\u4e2d\u5fc3\u3068\u3059\u308b\u5076\u6570\u9577\u306e\u6700\u5927\u56de\u6587\n    # \u30c0\u30df\u30fc\u6587\u5b57\u3092\u631f\u3080\u304c\u3001\u5404 R[i] \u306f\u5b9f\u969b\u306e\u56de\u6587\u306e\u6587\u5b57\u5217\u9577\u3068\u4e00\u81f4\u3059\u308b\n    def manacher(S):\n        C = []\n        for a in S:\n            C.append(a)\n            C.append(0)\n        C.pop()\n\n        L = len(C)\n\n        R = [0] * L\n\n        i = j = 0\n        while i < L:\n            while j <= i < L - j and C[i - j] == C[i + j]:\n                j += 1\n            R[i] = j\n            k = 1\n            while j - R[i - k] > k <= i < L - k:\n                R[i + k] = R[i - k]\n                k += 1\n            i += k\n            j -= k\n        return R\n\n    for _ in range(int(input())):\n        S = input().rstrip('\\n')\n        N = len(S)\n        if N == 1:\n            print(S)\n            continue\n        ii = -1\n        for i in range(N//2):\n            if S[i] != S[N-1-i]:\n                break\n            ii = i\n        if ii >= 0:\n            ss = S[:ii+1]\n            S = S[ii+1:N-ii-1]\n        else:\n            ss = ''\n        N = len(S)\n        if N == 0:\n            print(''.join([ss, ss[::-1]]))\n            continue\n        R = manacher(S)\n        M = 0\n        iii = 0\n        for i in range(N):\n            if R[i*2] > M:\n                if R[i*2]%2 == 0:\n                    continue\n                k = R[i*2] // 2\n                if i-k == 0 or i+k == N-1:\n                    M = R[i*2]\n                    iii = i\n        for i in range(N-1):\n            if R[i*2+1] > M:\n                if R[i*2+1]%2 == 1:\n                    continue\n                k = R[i*2+1] // 2\n                if i-k+1 == 0 or i+k == N-1:\n                    M = R[i*2+1]\n                    iii = i\n        if M & 1:\n            ans = S[iii - M//2: iii + M // 2 + 1]\n        else:\n            ans = S[iii - M // 2 + 1: iii + M // 2 + 1]\n        print(''.join([ss, ans, ss[::-1]]))\n        #print(S, R, iii, M)\n\n\ndef __starting_point():\n    main()\n\n__starting_point()", "import sys\ninput = sys.stdin.readline\n\nt=int(input())\nfor tests in range(t):\n    S=input().strip()\n\n    ANSP=[]\n    #ANSS=[]\n\n    f=0\n    l=len(S)-1\n\n    while f<l and S[f]==S[l]:\n        ANSP.append(S[f])\n        #ANSS.append(S[l])\n        f+=1\n        l-=1\n\n    if f==l or f==l+1:\n        print(S)\n        continue\n\n    #print(ANSP)\n\n    S2=S[f:l+1]\n    #print(S2)\n\n    SS2=[]\n    for s in S2:\n        SS2.append(s)\n        SS2.append(\"$\")\n    SS2.pop()\n\n    #print(SS2)\n\n    LEN=len(SS2)\n    i=0\n    j=0\n    R=[0]*LEN # \u6587\u5b57 i \u3092\u4e2d\u5fc3\u3068\u3059\u308b\u6700\u9577\u306e\u56de\u6587\u306e\u534a\u5f84\n\n    while i<LEN:\n        while i-j>=0 and i+j<LEN and SS2[i-j]==SS2[i+j]:\n            j+=1\n        R[i]=j\n        \n        k=1\n        while i-k>=0 and i+k<LEN and k+R[i-k]<j:\n            R[i+k]=R[i-k]\n            k+=1\n\n        i+=k\n        j-=k\n\n    #print(R)\n\n    MAX=0\n\n    for i in range(LEN):\n        if i-R[i]+1==0 or i+R[i]==LEN:\n            if MAX<R[i]:\n                MAX=R[i]\n                MAXind=i\n\n    S3=SS2[MAXind-MAX+1:MAXind+MAX]\n\n    #print(S3)\n\n    SS3=[]\n    for s in S3:\n        if s!=\"$\":\n            SS3.append(s)\n\n    sys.stdout.write(\"\".join(ANSP)+\"\".join(SS3)+\"\".join(ANSP[::-1])+\"\\n\")\n\n    \n            \n\n    \n        \n"]